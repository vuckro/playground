import{u as H,r as w,c as g,o as Q,a as z,b as m,w as S,d as y,e as B,F as V,f as F,n as _,g as L,_ as Z,h as v,i as ee,T as te,l as G,j as q,k as P,m as x,p as se,q as D,t as I,S as O,s as U,v as re,x as ne}from"./assets/index-BwRceJDo.js";import{A as ae,T as oe,s as ie}from"./assets/index-XtsS54p_.js";import{N as le,L as de}from"./assets/index-BzwQcq11.js";import{h as j}from"./assets/hexToRgb-v71kCAmo.js";import{i as ce}from"./assets/isObject-CInHxCpH.js";import{s as ue,u as pe}from"./assets/useColorScheme-Bb6NuE_1.js";import"./assets/index-bl3BAxE_.js";import"./assets/vue-router-crEbtjCJ.js";import"./assets/inSearch-uRPV3sBV.js";import"./assets/index-CNUiajaY.js";import"./assets/returnIconOverrides-ClaXUxKe.js";import"./assets/vue-draggable-next.esm-bundler-CrilaFAU.js";import"./assets/index-B7jFWQV3.js";const me={key:0,class:"uipx-normalize"},be={key:0,class:"flex flex-col"},fe={class:"flex flex-col gap-1 flex-1"},he=["innerHTML"],ge=["innerHTML"],ye={__name:"index",setup(a){const c=H(),b=w([]),u=w(!1),o=w({}),$=async()=>{u.value=!0;const p=await G({endpoint:"wp/v2/uixpress-notices",params:{status:"publish",per_page:100}});u.value=!1,p&&p.data&&(b.value=p.data)},T=l=>{var i,f;const p=c.state.userID,t=c.state.userRoles||[],s=((i=l.meta)==null?void 0:i.roles)||[],n=((f=l.meta)==null?void 0:f.seen_by)||[];return n.includes(Number(p))||n.includes(p)?!1:!!(!s.length||s.some(e=>e.type==="user"&&e.id==p)||s.some(e=>e.type==="role"&&t.includes(e.value)))},k={info:{icon:"lightbulb",container:"bg-blue-50 dark:bg-blue-900/30 border-b border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200",iconClass:"text-blue-400"},success:{icon:"check",container:"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-200",iconClass:"text-green-400"},warning:{icon:"warning",container:"bg-orange-50 dark:bg-orange-900/30 border-orange-200 dark:border-orange-700 text-orange-800 dark:text-orange-200",iconClass:"text-orange-400"},error:{icon:"error",container:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200",iconClass:"text-red-400"}},h=g(()=>b.value.filter(T)),N=async l=>{var s;const p=c.state.userID;if(!p)return;o.value[l.id]=!0;const t=await G({endpoint:"uixpress/v1/notices/seen",type:"POST",data:{notice_id:l.id}});if(t&&t.seen_by)l.meta.seen_by=t.seen_by;else{let n=Array.isArray((s=l.meta)==null?void 0:s.seen_by)?[...l.meta.seen_by]:[];!n.includes(Number(p))&&!n.includes(p)&&n.push(Number(p)),l.meta.seen_by=n}o.value[l.id]=!1},M=g(()=>{var l;return(l=c.state.uixpress_settings)==null?void 0:l.layout}),A=g(()=>{switch(M.value){case"rounded":return"rounded-lg shadow-sm mx-4";case"bubble":return"rounded-lg shadow-sm mx-6";default:return""}});return Q($),(l,p)=>(m(),z(te,null,{default:S(()=>[u.value?B("",!0):(m(),y("div",me,[h.value.length>0?(m(),y("div",be,[(m(!0),y(V,null,F(h.value,t=>{var s,n;return m(),y("div",{key:t.id,class:_(["flex flex-row items-start gap-4 border-b py-4 px-6",[k[((s=t.meta)==null?void 0:s.notice_type)||"info"].container,A.value]])},[L("div",fe,[L("div",{class:"font-semibold text-base",innerHTML:t.title.rendered},null,8,he),L("div",{class:"prose dark:prose-invert max-w-none",innerHTML:t.content.rendered},null,8,ge)]),(n=t.meta)!=null&&n.dismissible?(m(),z(Z,{key:0,onClick:i=>N(t),loading:o.value[t.id],type:"transparent"},{default:S(()=>[v(ee,{icon:"close"})]),_:2},1032,["onClick","loading"])):B("",!0)],2)}),128))])):B("",!0)]))]),_:1}))}},xe=["index.php","update-core.php","edit.php","post.php","post-new.php","edit-tags.php","upload.php","media-new.php","edit-comments.php","themes.php","customize.php","site-editor.php","plugins.php","plugin-install.php","users.php","user-new.php","profile.php","plugin-editor.php","options-general.php","options-writing.php","options-reading.php","options-discussion.php","options-media.php","options-permalink.php","options-privacy.php","theme-install.php"],_e=["acf-admin-page","settings_page_slim-seo"],ve=()=>{const a=document.body.classList;for(let c of _e)if(a.contains(c))return!1;return!0},we=a=>{let c=!1,b=!1;for(let t of xe){if(t=="options-general.php"){const s=window.location.href,n=new URLSearchParams(window.location.search);if(s.includes("options-general.php")&&n.has("page"))continue}if(window.location.href.includes(t)&&ve())return}function u(t){const s=document.createElement("div");s.style.color=t,document.body.appendChild(s);const n=window.getComputedStyle(s).color;document.body.removeChild(s);const i=n.match(/\d+(\.\d+)?/g);if(i){const[f,e,r,d=1]=i.map(Number);return{r:f,g:e,b:r,a:d}}return{r:0,g:0,b:0,a:1}}function o(t,s){if(s.a<1){const r=s.a,d={r:18,g:18,b:18};s={r:s.r*r+d.r*(1-r),g:s.g*r+d.g*(1-r),b:s.b*r+d.b*(1-r),a:1}}const n=$(t),i=$(s),f=Math.max(n,i),e=Math.min(n,i);return(f+.05)/(e+.05)}function $(t){const s=[t.r,t.g,t.b].map(n=>(n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)));return .2126*s[0]+.7152*s[1]+.0722*s[2]}function T(t){return t.r<=30&&t.g<=30&&t.b<=30}function k(t,s){const n=u(t);let i=u(s);return i.a===0&&(i={r:18,g:18,b:18,a:1}),o(n,i)<4.5||T(n)}function h(t){return["border","border-top","border-right","border-bottom","border-left","border-inline","border-inline-start","border-inline-end","border-block","border-block-start","border-block-end"].some(n=>{const i=t.getPropertyValue(n);return i&&i!=="none"&&i!=="0px"})}function N(t){return t.r>=250&&t.g>=250&&t.b>=250}function M(t){if(t.classList.contains("dark-mode-processed"))return;const s=window.getComputedStyle(t),n=s.color,i=s.backgroundColor;s.borderColor,k(n,i)&&t.classList.add("dark:important:text-zinc-300");const f=u(i);T(f)||(N(f)?t.classList.add("dark:important:bg-zinc-900"):t.classList.add("dark:important:bg-zinc-800")),h(s)&&t.classList.add("dark:important:border-zinc-700"),t.classList.add("dark-mode-processed")}function A(t){t.nodeType===Node.ELEMENT_NODE&&M(t);for(let s of t.childNodes)A(s)}function l(){if(c){b=!0;return}c=!0,b=!1,A(a),c=!1,b&&requestAnimationFrame(l)}l();const p=new MutationObserver(t=>{c?b=!0:requestAnimationFrame(l)});return p.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),()=>p.disconnect()},W=a=>{},ke={class:"bg-white dark:bg-zinc-900"},Ce={class:"uipx-normalize fixed top-0 left-0 right-0"},ze={class:"w-full h-full flex flex-row max-w-full overflow-hidden text-zinc-700 dark:text-zinc-300"},Se=["id","href"],Le=["id","href"],$e={__name:"index",setup(a){ue();const{prefersDark:c}=pe(),b=w(new CSSStyleSheet);w(!0),w(!1);const u=w(null);w(null);const o=H(),$=()=>{let e=document.querySelector("#uixpress-css");if(!e)e=T(),e.onload=()=>{const r=e.sheet;for(const d of[...r.cssRules].reverse())b.value.insertRule(d.cssText);N()};else{const r=e.sheet;for(const d of[...r.cssRules].reverse())b.value.insertRule(d.cssText);N()}},T=()=>{var e=document.createElement("link");return e.rel="stylesheet",e.href=`${o.state.siteURL}/wp-content/plugins/uixpress/app/dist/assets/styles/app.css`,document.head.appendChild(e),e},k=g(()=>{var e;return((e=o.state.uixpress_settings)==null?void 0:e.custom_css)||""}),h=g(()=>{var e;return(e=o.state.uixpress_settings)==null?void 0:e.layout}),N=()=>{if(Array.isArray(o.state.uixpress_settings.base_theme_scale)){const e=o.state.uixpress_settings.base_theme_scale;for(let r of e){const d=j(r.color),C=`--uix-base-${r.step}`;document.documentElement.style.setProperty(C,d.join(" "))}}if(Array.isArray(o.state.uixpress_settings.accent_theme_scale)){const e=o.state.uixpress_settings.accent_theme_scale;for(let r of e){const d=j(r.color),C=`--uix-accent-${r.step}`;document.documentElement.style.setProperty(C,d.join(" "))}}},M=()=>{if(!(u.value instanceof Element))throw new Error("Target node must be a valid DOM element");for(;u.value.firstChild;)u.value.removeChild(u.value.firstChild);Array.from(document.body.children).forEach(r=>{r!==u.value&&r.id!=="uip-classic-app"&&u.value.appendChild(r)}),c.value&&o.state.uixpress_settings.auto_dark&&U(()=>{we(u.value),W(u.value)}),U(()=>{W(u.value)})},A=q(()=>{u.value&&(M(),A())}),l=async()=>{if(!document.startViewTransition)return;let e=!1;window.navigation.addEventListener("navigate",r=>{const d=new URL(r.destination.url);location.origin===d.origin&&(r.navigationType==="reload"||r.navigationType==="replace"||e||d&&d.hash||(o.updateState("loading",!0),setTimeout(()=>{o.updateState("loading",!1)},5e3)))})};q(()=>{c.value?document.body.classList.add("dark"):document.body.classList.remove("dark")}),document.body.classList.add("uipc-body"),$(),Q(l),window.addEventListener("pagehide",e=>{o.updateState("loading",!1)}),document.addEventListener("uipx-settings-update",e=>{ce(e.detail)&&(o.state.uixpress_settings={...o.state.uixpress_settings,...e.detail})});const p=g(()=>{const e="overflow-auto grow relative uipc-body pointer-events-auto";switch(h.value){case"rounded":return`${e} rounded-tl-xl rounded-bl-xl bg-white dark:bg-zinc-900 border border-zinc-100 dark:border-zinc-800 border-solid shadow ml-4 mt-4 max-lg:ml-0 max-lg:mt-0 max-lg:rounded-bl-none max-lg:rounded-tl-none`;case"bubble":return e;default:return e}}),t=g(()=>{const e="flex flex-col h-screen w-full max-w-full max-h-screen overflow-hidden";switch(h.value){case"rounded":return`${e} pb-4 box-border max-lg:pb-0`;case"bubble":return`${e} bg-zinc-100/50 dark:bg-zinc-900`;default:return e}}),s=g(()=>{const e="shrink-0 max-lg:hidden uipx-normalize";switch(h.value){case"rounded":return`${e} bg-white dark:bg-zinc-900`;case"bubble":return`${e} p-6 bg-zinc-100/50 dark:bg-zinc-900 max-h-[100dvh]`;default:return e}}),n=g(()=>{const e="uipx-normalize box-border font-sans",r=c.value?"dark":"";switch(h.value){case"rounded":return`${e} ${r}`;case"bubble":return`${e} ${r} border border-zinc-100 dark:border-zinc-700/30 bg-white dark:bg-zinc-800/40 rounded-2xl shadow-lg`;default:return`${e} ${r} border-r border-zinc-200 dark:border-zinc-700/30 bg-white dark:bg-zinc-900`}}),i=g(()=>h.value==="bubble"?"pt-2":""),f=g(()=>{const e="shrink-0 uipx-normalize font-sans",r=c.value?"dark":"";switch(h.value){case"rounded":return`${e} ${r} bg-white dark:bg-zinc-900`;case"bubble":return`${e} ${r}`;default:return`${e} ${r} border-b border-zinc-200 dark:border-zinc-700/30 bg-white dark:bg-zinc-900`}});return(e,r)=>(m(),y("div",ke,[(m(),z(P("style"),null,{default:S(()=>r[0]||(r[0]=[D(" :root{font-size:14px}table.fixed {position: static}")])),_:1,__:[0]})),(m(),z(P("style"),{innerHTML:k.value},null,8,["innerHTML"])),v(le,{class:"uipx-normalize font-sans"}),(m(),z(se,{to:"body"},[L("div",Ce,[v(x(de),{height:3,class:""})])])),L("div",ze,[v(x(O),{tag:"div","adopted-style-sheets":[b.value],class:_(s.value)},{default:S(()=>[(m(),z(P("style"),null,{default:S(()=>[D(I(k.value),1)]),_:1})),v(ae,{class:_(n.value),id:"uixp-menu"},null,8,["class"]),Array.isArray(x(o).state.uixpress_settings.external_stylesheets)?(m(!0),y(V,{key:0},F(x(o).state.uixpress_settings.external_stylesheets,(d,C)=>(m(),y("link",{rel:"stylesheet",id:`uix-external-${C}-css`,href:d,media:"all"},null,8,Se))),256)):B("",!0)]),_:1},8,["adopted-style-sheets","class"]),L("div",{class:_(t.value)},[v(x(O),{tag:"div","adopted-style-sheets":[b.value],class:_(i.value)},{default:S(()=>[(m(),z(P("style"),null,{default:S(()=>[D(I(k.value),1)]),_:1})),v(oe,{class:_(f.value),id:"uixp-toolbar"},null,8,["class"]),Array.isArray(x(o).state.uixpress_settings.external_stylesheets)?(m(!0),y(V,{key:0},F(x(o).state.uixpress_settings.external_stylesheets,(d,C)=>(m(),y("link",{rel:"stylesheet",id:`uix-external-${C}-css`,href:d,media:"all"},null,8,Le))),256)):B("",!0),v(ye,{class:_(x(c)?"dark":"")},null,8,["class"])]),_:1},8,["adopted-style-sheets","class"]),L("div",{class:_(p.value),ref_key:"bodyholder",ref:u,id:"uixp-body"},null,2)],2)])]))}},R=re($e),Te=ne();R.use(Te);const E=H();ie(E);let X=new Map;E&&E.state&&E.state.uixpress_settings&&Array.isArray(E.state.uixpress_settings.text_replacements)&&(X=new Map(E.state.uixpress_settings.text_replacements.filter(a=>Array.isArray(a)&&a.length===2&&typeof a[0]=="string"&&typeof a[1]=="string").map(a=>[a[0],a[1]])));const Ne=window.wp.i18n.__,Y=(a,c)=>{let b=X.get(a)||a;return Ne(b,c)};window.__=Y;R.config.globalProperties.__=Y;R.config.globalProperties.sprintf=window.wp.i18n.sprintf;const J=document.getElementById("uipx-favicon");J&&document.getElementsByTagName("head")[0].appendChild(J);const Ae=document.querySelector("#uip-classic-app");if(Ae)R.mount("#uip-classic-app");else{const a=document.createElement("div");a.id="uip-classic-app",a.className="fixed inset-0 h-screen w-screen z-[2] bg-white dark:bg-zinc-900",document.body.appendChild(a),R.mount(a)}const K=document.querySelector("#uipc-temporary-body-hider");K&&K.remove();
//# sourceMappingURL=app.build.dqBcSm6f.js.map
