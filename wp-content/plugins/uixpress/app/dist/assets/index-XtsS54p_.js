import{c as Q,r as y,d as r,b as t,C as ue,n as G,j as xe,a as O,g as n,P as ot,I as Se,p as rt,s as Ae,m as l,i as R,e as g,t as U,o as Oe,J as Fe,D as Pe,u as Ne,F as B,h as c,w as M,_ as ve,q as Ce,k as Me,G as Be,H as it,Q as be,f as de,T as he,R as tt,l as He,y as vt,N as gt}from"./index-BwRceJDo.js";import{_ as ht}from"./index-bl3BAxE_.js";import{u as xt}from"./vue-router-crEbtjCJ.js";import{i as ye}from"./inSearch-uRPV3sBV.js";import{u as We}from"./useColorScheme-Bb6NuE_1.js";import{M as bt}from"./index-CNUiajaY.js";import{O as le,d as yt,m as K,r as _t,l as Re,p as wt}from"./returnIconOverrides-ClaXUxKe.js";import{V as kt}from"./vue-draggable-next.esm-bundler-CrilaFAU.js";import{_ as Ee}from"./index-B7jFWQV3.js";import{i as zt}from"./isObject-CInHxCpH.js";const Hs=e=>{const s=document.querySelector("#uipc-script");if(!s)return;const i=s.getAttribute("plugin-base"),f=s.getAttribute("rest-base"),h=s.getAttribute("rest-nonce"),d=s.getAttribute("admin-url"),x=s.getAttribute("login-url"),k=s.getAttribute("site-url"),E=s.getAttribute("user-id");let H=s.getAttribute("user-roles");H=H?JSON.parse(H):[];const A=s.getAttribute("user-name"),V=s.getAttribute("user-email");let j=s.getAttribute("front-page");j=j=="true";let b=s.getAttribute("uixpress-settings");b=JSON.parse(b);let w=s.getAttribute("can-manage-options");w=w=="true",e.updateState("pluginBase",i),e.updateState("restBase",f),e.updateState("restNonce",h),e.updateState("adminUrl",d),e.updateState("loginUrl",x),e.updateState("siteURL",k),e.updateState("userID",E),e.updateState("userRoles",H),e.updateState("userName",A),e.updateState("userEmail",V),e.updateState("frontPage",j),e.updateState("uixpress_settings",b),e.updateState("canManageOptions",w)},lt=async e=>{if(!e)return e;const s=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(i)).map(d=>d.toString(16).padStart(2,"0")).join("")},$t=Q(()=>le.value.reduce((e,s)=>(Array.isArray(s.submenu)&&e.push(...s.submenu),e),[])),ge=(e,s,i)=>{const f=e.id,h=le.value.find(x=>x.id==f);if(h)return h[s]||i;const d=$t.value.find(x=>x.id==f);if(d)return d[s]||i},St=Q(()=>yt.value.map(e=>(e.before&&e.before.includes("url(")&&(e.backGroundImage=e.before,e.before=""),`
	${e.class}:before {
	  content: '${e.before||""}';
	  height: 1.2rem;
	  width: 1.2rem;
	  min-height: 1.2rem;
	  min-width: 1.2rem;
	  color: currentColor;
	  font-size: 1.2rem;
	  background-size: contain;
	  background-repeat: no-repeat;
	  background-position: center center;
	  ${e.font?`font-family: '${e.font}' !important;`:""}
	  ${e.backGroundImage?`background-image: ${e.backGroundImage} !important;`:""}
	  ${e.backGroundImage?"filter: contrast(0.3);":""}
	}
  `)).join(`
`)),ut={__name:"index",props:{minWidth:{type:Number,default:200},maxWidth:{type:Number,default:window.innerWidth},tolerance:{type:Number,default:30},storageKey:{type:String,default:"uipc_panel_width"},position:{type:String,default:"right"}},emits:["resize"],setup(e,{emit:s}){const i=e,f=s,h=y(null),d=y(!1),x=y(!1),k=Q(()=>document.documentElement.dir=="rtl"),E=()=>{x.value=!0},H=()=>{x.value=!1},A=Q(()=>{var z;return(z=h==null?void 0:h.value)==null?void 0:z.parentElement}),V=z=>{z.preventDefault(),d.value=!0,window.addEventListener("mousemove",j),window.addEventListener("mouseup",w)},j=z=>{z.stopPropagation();const F=A.value.getBoundingClientRect();let C;!k.value&&i.position!="left"?C=Math.max(i.minWidth,Math.min(z.clientX-F.left,i.maxWidth)):C=Math.max(i.minWidth,Math.min(F.right-z.clientX,i.maxWidth)),f("resize",C)},b=()=>{const z=localStorage.getItem(i.storageKey);if(z){const F=parseInt(z);return F>window.innerWidth?void 0:(f("resize",F),F)}return null},w=()=>{event.stopPropagation(),d.value=!1,window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",w),q()},q=()=>{A.value&&localStorage.setItem(i.storageKey,A.value.offsetWidth.toString())};return b(),(z,F)=>(t(),r("div",{ref_key:"handleRef",ref:h,class:G(["absolute top-0 h-full w-1 cursor-ew-resize transition-opacity duration-300 ease-in-out bg-indigo-500/20",[{"opacity-100":x.value||d.value,"opacity-0":!x.value&&!d.value},k.value||e.position=="left"?"left-0":"right-0"]]),onMousedown:ue(V,["stop"]),onClick:F[0]||(F[0]=ue(()=>{},["stop"])),onMouseenter:E,onMouseleave:H},null,34))}},nt={__name:"submenu",props:["parent","mouseenter","mouseleave"],setup(e){const s=y(null),i=y({}),f=y(null),h=()=>{const d=s.value.getBoundingClientRect();i.value={left:`${d.left}px`,top:`${d.top}px`},Ae(()=>{if(!f.value)return;const x=f.value.getBoundingClientRect();x.bottom>window.innerHeight&&(i.value={left:`${d.left}px`,top:`${window.innerHeight-x.height}px`})})};return xe(()=>{s.value&&h()}),(d,x)=>(t(),r("div",{ref_key:"anchor",ref:s},[(t(),O(rt,{to:e.parent},[n("div",{class:"fixed bg-white dark:bg-zinc-900 z-[9999] shadow-sm rounded-xl border border-zinc-600/10 dark:border-zinc-800 p-3 text-sm",style:Se(i.value),onMouseenter:x[0]||(x[0]=k=>e.mouseenter()),onMouseleave:x[1]||(x[1]=k=>e.mouseleave()),ref_key:"submenu",ref:f},[ot(d.$slots,"default")],36)],8,["to"]))],512))}},qe={__name:"menu-icon",props:["link"],setup(e){return(s,i)=>{var f;return(f=e.link.settings)!=null&&f.icon?(t(),O(R,{key:1,icon:e.link.settings.icon,class:"text-xl text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 group-[.active]:text-zinc-900 dark:group-[.active]:text-zinc-100"},null,8,["icon"])):(t(),r("div",{key:0,class:G(["icon text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-zinc-100 group-[.active]:text-zinc-900 dark:group-[.active]:text-zinc-100 w-[1.2rem] h-[1.2rem] bg-contain bg-center bg-no-repeat contrast-50 group-[.active]:contrast-[1]",l(ge)(e.link,"imageClasses",e.link.imageClasses)]),style:Se(l(ge)(e.link,"iconStyles",e.link.iconStyles))},null,6))}}},At={class:"pl-12 group-hover:text-zinc-950 dark:group-hover:text-zinc-100 transition-color flex-grow text-base grow truncate flex flex-row items-center gap-4"},Ct=["innerHTML"],Mt={key:0,class:"text-xs bg-indigo-500 dark:bg-indigo-600/30 rounded border border-indigo-600 px-1 text-zinc-100"},st={__name:"menu-item-name",props:["link"],setup(e){return(s,i)=>{var f;return t(),r("div",At,[n("div",{innerHTML:((f=e.link.settings)==null?void 0:f.name)||l(ge)(e.link,"name",e.link.name),class:"truncate"},null,8,Ct),l(ge)(e.link,"notifications",e.link.notifications)?(t(),r("div",Mt,U(l(ge)(e.link,"notifications",e.link.notifications)),1)):g("",!0)])}}},Lt=["href","id","target"],Ue={__name:"menu-item-link",props:["link","isActive","isFocused"],setup(e){return(s,i)=>{var f;return t(),r("a",{href:e.link.url,id:e.link.id,class:G(["flex flex-row rounded-lg items-center cursor-pointer gap-1 group transition-all relative",e.isActive||e.isFocused?"text-zinc-900 dark:text-zinc-100 active bg-zinc-100 dark:bg-zinc-800 active":"hover:bg-zinc-100 hover:dark:bg-zinc-800"]),target:(f=e.link.settings)!=null&&f.open_new?"_BLANK":""},[ot(s.$slots,"default")],10,Lt)}}},It=["href","id"],Ft={class:"group-hover:text-zinc-950 dark:group-hover:text-zinc-100 transition-color flex-grow text-base grow truncate flex flex-row items-center gap-4"},Nt=["innerHTML"],Tt={key:0,class:"text-xs bg-indigo-500 dark:bg-indigo-600/30 rounded border border-indigo-600 px-1 text-zinc-100"},De={__name:"submenu-item",props:["sublink","isFocused","isActive","isFavorite","hideFavorite"],setup(e){const s=e,i=f=>{if(!s.sublink.og_node)return;const h=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window});s.sublink.og_node.dispatchEvent(h)};return(f,h)=>{var d,x;return t(),r("a",{href:e.sublink.url,id:e.sublink.sub_id,class:G(["flex flex-row p-1 px-4 rounded-lg items-center cursor-pointer gap-1 group transition-all",e.isActive||e.isFocused?"text-zinc-900 dark:text-white active font-semibold":" hover:bg-zinc-100 hover:dark:bg-zinc-800"]),onClick:h[1]||(h[1]=k=>i())},[n("div",Ft,[n("div",{innerHTML:((d=e.sublink.settings)==null?void 0:d.name)||l(ge)(e.sublink,"name",e.sublink.name),class:"truncate"},null,8,Nt),l(ge)(e.sublink,"notifications",e.sublink.notifications)?(t(),r("div",Tt,U(l(ge)(e.sublink,"notifications",e.sublink.notifications)),1)):g("",!0)]),!e.isFavorite&&!e.hideFavorite?(t(),O(R,{key:0,icon:"star",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:h[0]||(h[0]=ue(k=>f.addFavorite({...e.sublink,imageClasses:f.link.imageClasses,iconStyles:f.link.iconStyles}),["prevent","stop"]))})):g("",!0),(x=e.sublink.settings)!=null&&x.open_new?(t(),O(R,{key:1,icon:"open_new",class:G([e.isActive||e.isFocused?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"])},null,8,["class"])):g("",!0)],10,It)}}};function Rt(){const e=y([]),s="uipc-menu-favorites",i=()=>{const k=localStorage.getItem(s);k&&(e.value=JSON.parse(k))},f=()=>{localStorage.setItem(s,JSON.stringify(e.value))},h=k=>{k&&k.url&&!e.value.some(E=>E.url===k.url)&&e.value.push(k)},d=k=>{const E=e.value.findIndex(H=>H.url===k.url);E>-1&&e.value.splice(E,1)},x=k=>e.value.some(E=>E.url===k);return Oe(()=>{i()}),Fe(e,()=>{f()},{deep:!0}),{favorites:e,addFavorite:h,removeFavorite:d,isFavorite:x}}const Et=["href"],qt=["href"],Ut=["src"],Dt={key:0,class:"relative flex mt-6"},Ot=["placeholder"],Pt={class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-4 py-1"},Bt={class:"flex flex-col gap-3"},Ht=["onMouseenter","onMouseleave"],Wt={key:0,class:"absolute top-0 right-[-2px] text-xs bg-indigo-500 dark:bg-indigo-600/30 rounded border border-indigo-600 px-1 text-zinc-100"},Kt=["target"],Vt={key:1,class:"w-full my-2"},jt={key:0,class:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent dark:from-zinc-900 pointer-events-none",id:"uixp-menu-overlay"},Gt={class:"flex flex-row items-center gap-3 place-content-center"},Jt={class:"w-7 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden"},Qt={class:"uppercase"},Xt=["src"],Yt={key:0,class:"text-sm py-3 font-medium mt-2 text-zinc-500 dark:text-zinc-400"},Zt={key:1,class:"flex flex-col gap-1"},en={key:0},tn={class:"absolute px-4 left-0"},nn={key:0,class:"border-t border-zinc-200 dark:border-zinc-800 my-6"},sn={class:"relative grow overflow-hidden flex"},an=["onMouseenter","onMouseleave"],on={class:"absolute px-4 left-0"},rn={class:"mt-2 mb-4 pl-1"},ln=["target"],un=["id"],cn=["innerHTML","id"],dn={key:0,class:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent dark:from-zinc-900 pointer-events-none",id:"uixp-menu-overlay"},mn={class:"flex flex-row items-center gap-3 shrink"},pn={class:"w-8 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden border border-zinc-200 dark:border-zinc-700"},fn={class:"lowercase relative",style:{top:"calc(((-1em / 1.5) + 1ex) / 2)"}},vn=["src"],gn={class:"flex flex-col leading-tight grow min-w-0"},hn={class:"truncate dark:text-zinc-100"},xn={class:"text-xs text-zinc-400 truncate"},bn={__name:"index",props:["mobile"],setup(e){const{prefersDark:s}=We(),i=Ne(),f=y(!1),h=y(""),d=y(-1),x=y(null),k=y(240),E=y([]),H=e,{favorites:A,addFavorite:V,removeFavorite:j,isFavorite:b}=Rt(),w=Q(()=>{const a=[];return q.value.forEach(p=>{p.type!=="separator"&&(a.push({...p,isTopLevel:!0}),p.submenu&&p.submenu.length&&F(p.submenu).forEach($=>{$.type!=="separator"&&a.push({...$,isTopLevel:!1,parentName:p.name})}))}),a}),q=Q(()=>Array.isArray(K.value)?K.value.filter(a=>{var p;return(ye(h.value,a.name,a.url)||ye(h.value,JSON.stringify(a.submenu)))&&!((p=a.settings)!=null&&p.hidden)}):[]),z=Q(()=>H.mobile?!1:i.state.menu_minimised),F=a=>a.filter(p=>{var $;return ye(h.value,p.name,p.url)&&!(($=p.settings)!=null&&$.hidden)}),C=async()=>{await ee(),setTimeout(ee,1e3);const a=se();if(Array.isArray(a)){K.value=a,ae();return}else if(a=="no_menus"){K.value=[...le.value];return}setTimeout(_,1)},D=Q(()=>{var a;return(a=i.state.uixpress_settings)==null?void 0:a.layout}),_=async()=>{await ee();const a=se();if(Array.isArray(a)){K.value=a,ae();return}else if(a=="no_menus"){K.value=[...le.value];return}Re.value=!0;const $=await He({endpoint:"wp/v2/uipxmenus",params:{per_page:100,status:"publish"}});if(Re.value=!1,!$){K.value=[...le.value];return}E.value=$.data,v()},v=()=>{var a,p,$,T,pe,ne,o,fe,ie,P,_e,we,ke,ze,X,$e,Ie,Ke,Ve,je,Ge,Je,Qe,Xe;if(!E.value.length){K.value=[...le.value],re("no_menus");return}for(let Y of E.value){if(((p=(a=Y.meta)==null?void 0:a.menu_settings)==null?void 0:p.applies_to_everyone)&&Array.isArray(($=Y.meta)==null?void 0:$.menu_items)){if(!((T=Y.meta)!=null&&T.menu_items.length))continue;K.value=[...(pe=Y.meta)==null?void 0:pe.menu_items],re((ne=Y.meta)==null?void 0:ne.menu_items),ae();return}const Ye=i.state.userRoles,ct=(fe=(o=Y.meta)==null?void 0:o.menu_settings)!=null&&fe.includes?(P=(ie=Y.meta)==null?void 0:ie.menu_settings)==null?void 0:P.includes.filter(Z=>Z.type=="role"):[],dt=((we=(_e=Y.meta)==null?void 0:_e.menu_settings)!=null&&we.includes?(ze=(ke=Y.meta)==null?void 0:ke.menu_settings)==null?void 0:ze.includes.filter(Z=>Z.type=="user"):[]).find(Z=>Z.id==i.state.userID);let Ze=!1;for(let Z of Ye)if(ct.find(Te=>Te.value==Z)){Ze=!0;break}const mt=($e=(X=Y.meta)==null?void 0:X.menu_settings)!=null&&$e.excludes?(Ke=(Ie=Y.meta)==null?void 0:Ie.menu_settings)==null?void 0:Ke.excludes.filter(Z=>Z.type=="role"):[],pt=((je=(Ve=Y.meta)==null?void 0:Ve.menu_settings)!=null&&je.excludes?(Je=(Ge=Y.meta)==null?void 0:Ge.menu_settings)==null?void 0:Je.excludes.filter(Z=>Z.type=="user"):[]).find(Z=>Z.id==i.state.userID);let et=!1;for(let Z of Ye)if(mt.find(Te=>Te.value==Z)){et=!0;break}if((dt||Ze)&&!pt&&!et){K.value=[...(Qe=Y.meta)==null?void 0:Qe.menu_items],re((Xe=Y.meta)==null?void 0:Xe.menu_items),ae();return}}K.value=[...le.value],re("no_menus")},re=a=>{const p=`uixpress_menu_${i.state.userID}`,$={value:a,timestamp:new Date().getTime()};localStorage.setItem(p,JSON.stringify($))};function se(){const a=`uixpress_menu_${i.state.userID}`,p=localStorage.getItem(a);if(!p)return null;const $=JSON.parse(p),T=new Date().getTime(),pe=60*60*1e3;return T-$.timestamp>pe?(localStorage.removeItem(a),null):$.value}const ae=()=>{let a=document.querySelector("#adminmenu a.current")||document.querySelector("#adminmenu .wp-menu-open a")||document.querySelector("#adminmenu a[aria-current='page']"),p="";a&&a.tagName&&a.tagName.toLowerCase()==="a"&&(p=a.getAttribute("href")),K.value=K.value.filter($=>oe($.id)||$.custom).map($=>({...$,active:p==$.url}));for(let $ of K.value)$.type=="separator"||!Array.isArray($.submenu)||($.submenu=$.submenu.filter(T=>oe(T.id)||T.custom).map(T=>({...T,active:p==T.url})));for(let[$,T]of le.value.entries())if(me(T.id)||K.value.splice($,0,T),!!T.submenu)for(let[pe,ne]of T.submenu.entries()){if(me(ne.id))continue;const o=K.value.find(fe=>fe.id==T.id);o?o.submenu.splice(pe,0,ne):(T.submenu=[ne],K.value.splice($,0,T))}},me=a=>{const p=K.value.find(T=>T.id==a),$=te.value.find(T=>T.id==a);return p||$},oe=a=>{const p=le.value.find(T=>T.id==a),$=N.value.find(T=>T.id==a);return p||$},J=a=>{if(a.active)return!0;if(a.submenu)return a.submenu.find(p=>p.active)},u=async()=>{const a=await lt(i.state.userEmail);f.value=`https://gravatar.com/avatar/${a}?d=blank`},m=()=>{d.value=(d.value+1)%w.value.length},S=()=>{d.value=(d.value-1+w.value.length)%w.value.length},L=()=>{if(d.value>=0&&d.value<w.value.length){const a=w.value[d.value];window.location.href=a.url}},I=a=>{if(!h.value)return;const p=w.value[d.value];if(p&&p.url==a.url&&p.name==a.name)return!0},ce=a=>{k.value=a},ee=async()=>{const a=document.querySelector("#adminmenumain"),{processedMenu:p}=await wt(a);le.value=p},te=Q(()=>K.value.reduce((a,p)=>(Array.isArray(p.submenu)&&a.push(...p.submenu),a),[])),N=Q(()=>le.value.reduce((a,p)=>(Array.isArray(p.submenu)&&a.push(...p.submenu),a),[])),W=a=>!Array.isArray(a.submenu)||!a.submenu.length?!1:!!(J(a)||a.active||h.value&&F(a.submenu).length);xe(()=>{d.value>w.value.length-1&&(d.value=0),d.value<0&&(d.value=w.value.length-1)}),xe(()=>{document.documentElement.style.setProperty("--uixp-menu-width",`${k.value}px`)}),Fe(()=>K.value,()=>{i.state.adminMenu=K.value},{deep:!0});const Le=async()=>{try{await Ae();const a=`${i.state.adminUrl}/admin.php?page=plugin-manager`,p=await fetch(a);if(!p.ok)return;const $=await p.text(),ne=new DOMParser().parseFromString($,"text/html").getElementById("adminmenumain");if(!ne)return;const o=ne.querySelectorAll("a");for(let P of o)P.classList.remove("current"),P.classList.remove("wp-menu-open"),P.getAttribute("aria-current")=="page"&&P.removeAttribute("aria-current"),P.classList.contains("toplevel_page_plugin-manager")&&P.classList.add("current");const fe=ne.querySelectorAll("li");for(let P of fe)P.classList.remove("current"),P.classList.remove("wp-menu-open");document.getElementById("adminmenumain").replaceWith(ne),await Ae(),await ee(),ae()}catch{}};return document.addEventListener("uipx-plugin-activated",Le),document.addEventListener("uipx-plugin-deactivated",Le),u(),C(),(a,p)=>{var $,T,pe,ne;return l(le)?(t(),r("div",{key:0,class:G(["flex flex-col gap-1 w-full h-full relative max-h-[100dvh]",z.value?"py-4":"p-4"]),ref_key:"menupanel",ref:x,style:Se(z.value?"width:auto":`width:${k.value}px`)},[n("div",{class:G(["flex flex-row items-center",z.value?"place-content-center mb-3":"place-content-between"])},[z.value?g("",!0):(t(),r(B,{key:0},[(T=($=l(i).state)==null?void 0:$.uixpress_settings)!=null&&T.logo?(t(),r("a",{key:1,href:l(i).state.adminUrl,class:"h-10"},[n("img",{src:l(s)&&((ne=(pe=l(i).state)==null?void 0:pe.uixpress_settings)!=null&&ne.dark_logo)?l(i).state.uixpress_settings.dark_logo:l(i).state.uixpress_settings.logo,class:"h-full"},null,8,Ut)],8,qt)):(t(),r("a",{key:0,href:l(i).state.adminUrl,class:"bg-white dark:bg-zinc-800 shadow p-2 rounded-lg place-self-start"},[c(R,{icon:"uipress",class:"text-2xl dark:text-white"})],8,Et))],64)),e.mobile?g("",!0):(t(),O(ve,{key:1,type:"transparent",title:a.__("Minify menu","uixpress"),onClick:p[0]||(p[0]=o=>l(i).state.menu_minimised=!l(i).state.menu_minimised),class:"hidden md:block"},{default:M(()=>[c(R,{icon:l(i).state.menu_minimised?"right_panel_close":"left_panel_close",class:"text-xl text-zinc-500 dark:text-zinc-400"},null,8,["icon"])]),_:1},8,["title"]))],2),(t(),O(Me("style"),null,{default:M(()=>[Ce(U(l(_t)),1)]),_:1})),(t(),O(Me("style"),null,{default:M(()=>[Ce(U(l(St)),1)]),_:1})),z.value?g("",!0):(t(),r("div",Dt,[Be(n("input",{"onUpdate:modelValue":p[1]||(p[1]=o=>h.value=o),class:"indent-1 px-4 pl-12 py-2 border border-zinc-200 dark:border-zinc-800 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm bg-transparent",placeholder:a.__("Search menu","uixpress"),onKeyup:[be(m,["down"]),be(S,["up"]),be(L,["enter"])]},null,40,Ot),[[it,h.value]]),n("div",Pt,[c(R,{icon:"search",class:"text-xl text-zinc-400"})])])),l(Re)?(t(),r("div",{key:1,class:G(["flex flex-col gap-6 mt-6",z.value?"":"p-3"])},[(t(),r(B,null,de(4,o=>n("div",Bt,[p[2]||(p[2]=n("div",{class:"h-6 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse"},null,-1)),n("div",{class:G(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",z.value?"w-full":"ml-8 w-2/3"])},null,2),n("div",{class:G(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",z.value?"w-full":"ml-8 w-1/4"])},null,2),n("div",{class:G(["h-4 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse",z.value?"w-full":"ml-8 w-1/3"])},null,2)])),64))],2)):g("",!0),z.value?(t(),r(B,{key:2},[n("div",{class:G(["relative grow flex overflow-hidden",z.value?"px-4":""])},[n("div",{class:G(["flex flex-col grow gap-1 custom-scrollbar pb-16",l(A).length?"":"mt-6"])},[(t(!0),r(B,null,de(q.value,(o,fe)=>{var ie;return t(),r(B,null,[o.type!="separator"?(t(),r("div",{key:0,class:"relative group-parent",onMouseenter:P=>o.hover=!0,onMouseleave:P=>o.hover=!1},[c(Ue,{link:o,isActive:J(o),isFocused:I(o),class:"p-2"},{default:M(()=>[c(qe,{link:o},null,8,["link"]),l(ge)(o,"notifications",o.notifications)?(t(),r("div",Wt,U(l(ge)(o,"notifications",o.notifications)),1)):g("",!0)]),_:2},1032,["link","isActive","isFocused"]),o.submenu&&o.submenu.length&&o.hover?(t(),r("div",{key:0,class:"absolute right-0 top-0 translate-x-full transition-opacity translate-x-0",target:(ie=o.settings)!=null&&ie.open_new?"_BLANK":""},[c(he,null,{default:M(()=>[c(nt,{parent:x.value,mouseenter:()=>o.hover=!0,mouseleave:()=>o.hover=!1},{default:M(()=>[(t(!0),r(B,null,de(F(o.submenu),P=>(t(),O(De,{isActive:J(P),isFocused:I(P),sublink:P,isFavorite:l(b)(P.url),hideFavorite:!0},null,8,["isActive","isFocused","sublink","isFavorite"]))),256))]),_:2},1032,["parent","mouseenter","mouseleave"])]),_:2},1024)],8,Kt)):g("",!0)],40,Ht)):(t(),r("div",Vt))],64)}),256))],2),D.value!="bubble"?(t(),r("div",jt)):g("",!0)],2),n("div",Gt,[n("div",Jt,[n("span",Qt,U(l(i).state.userName.charAt(0)),1),f.value?(t(),r("img",{key:0,src:f.value,class:"absolute w-full h-full z-[2]"},null,8,Xt)):g("",!0)])])],64)):g("",!0),z.value?g("",!0):(t(),r(B,{key:3},[c(tt,null,{default:M(()=>[l(A).length&&!h.value?(t(),r(B,{key:0},[l(A).length?(t(),r("div",Yt,U(a.__("Shortcuts","uixpress")),1)):g("",!0),l(A).length?(t(),r("div",Zt,[c(l(kt),{class:"contents",group:{name:"menus",pull:!0,put:!0,revertClone:!1},list:l(A),animation:"300",sort:!0},{default:M(()=>[c(tt,null,{default:M(()=>[(t(!0),r(B,null,de(l(A),(o,fe)=>(t(),r(B,{key:fe},[o.type!="separator"?(t(),r("div",en,[c(Ue,{link:o,isActive:!1,isFocused:!1,class:"p-1 pr-4 pl-1"},{default:M(()=>{var ie;return[n("div",tn,[c(qe,{link:o},null,8,["link"])]),c(st,{link:o},null,8,["link"]),c(R,{icon:"close",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:ue(P=>l(j)(o),["prevent","stop"])},null,8,["onClick"]),(ie=o.settings)!=null&&ie.open_new?(t(),O(R,{key:0,icon:"open_new",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity"})):g("",!0)]}),_:2},1032,["link"])])):g("",!0)],64))),128))]),_:1})]),_:1},8,["list"])])):g("",!0)],64)):g("",!0)]),_:1}),l(A).length?(t(),r("div",nn)):g("",!0),n("div",sn,[n("div",{class:G(["flex flex-col grow gap-1 grow overflow-auto pb-16",l(A).length?"":"mt-6"])},[(t(!0),r(B,null,de(q.value,(o,fe)=>{var ie,P,_e,we,ke,ze;return t(),r(B,null,[o.type!="separator"?(t(),r("div",{key:0,onMouseenter:X=>o.hover=!0,onMouseleave:X=>o.hover=!1,class:"relative group-parent"},[c(Ue,{link:o,isActive:J(o),isFocused:I(o),class:"p-1 pr-4 pl-1"},{default:M(()=>{var X,$e;return[n("div",on,[c(qe,{link:o},null,8,["link"])]),c(st,{link:o},null,8,["link"]),l(b)(o.url)?g("",!0):(t(),O(R,{key:0,icon:"star",class:"opacity-0 group-hover:opacity-100 text-base transition-opacity",onClick:ue(Ie=>l(V)(o),["prevent","stop"])},null,8,["onClick"])),o.submenu&&o.submenu.length&&((X=l(i).state.uixpress_settings)==null?void 0:X.submenu_style)!="hover"?(t(),O(R,{key:1,icon:J(o)||o.active?"expand_more":"chevron_left",class:G([J(o)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"]),onClick:ue(Ie=>o.active=!o.active,["prevent","stop"])},null,8,["icon","class","onClick"])):g("",!0),($e=o.settings)!=null&&$e.open_new?(t(),O(R,{key:2,icon:"open_new",class:G([J(o)?"opacity-100":"","opacity-0 group-hover:opacity-100 text-base transition-opacity"])},null,8,["class"])):g("",!0)]}),_:2},1032,["link","isActive","isFocused"]),W(o)?(t(),O(he,{key:0},{default:M(()=>[n("div",rn,[(t(!0),r(B,null,de(F(o.submenu),X=>(t(),O(De,{isActive:J(X),isFocused:I(X),sublink:X,isFavorite:l(b)(X.url),class:"pl-12"},null,8,["isActive","isFocused","sublink","isFavorite"]))),256))])]),_:2},1024)):o.submenu&&o.submenu.length&&o.hover&&((ie=l(i).state.uixpress_settings)==null?void 0:ie.submenu_style)=="hover"&&!e.mobile?(t(),r("div",{key:1,class:"absolute right-0 top-0 translate-x-full transition-opacity translate-x-0",target:(P=o.settings)!=null&&P.open_new?"_BLANK":""},[c(he,null,{default:M(()=>[c(nt,{parent:x.value,mouseenter:()=>o.hover=!0,mouseleave:()=>o.hover=!1},{default:M(()=>[(t(!0),r(B,null,de(F(o.submenu),X=>(t(),O(De,{isActive:J(X),isFocused:I(X),sublink:X,isFavorite:l(b)(X.url),hideFavorite:!0},null,8,["isActive","isFocused","sublink","isFavorite"]))),256))]),_:2},1032,["parent","mouseenter","mouseleave"])]),_:2},1024)],8,ln)):g("",!0)],40,an)):o.type=="separator"&&!((_e=o.settings)!=null&&_e.hidden)&&!((we=o.settings)!=null&&we.name)?(t(),r("div",{key:1,class:"w-full my-2",id:o.id},null,8,un)):o.type=="separator"&&!((ke=o.settings)!=null&&ke.hidden)&&((ze=o.settings)!=null&&ze.name)?(t(),r("div",{key:2,class:"text-sm py-3 font-medium mt-2 rounded-lg",innerHTML:o.settings.name,id:o.id},null,8,cn)):g("",!0)],64)}),256))],2),D.value!="bubble"?(t(),r("div",dn)):g("",!0)]),n("div",mn,[n("div",pn,[n("span",fn,U(l(i).state.userName.charAt(0)),1),f.value?(t(),r("img",{key:0,src:f.value,class:"absolute w-full h-full"},null,8,vn)):g("",!0)]),n("div",gn,[n("span",hn,U(l(i).state.userName),1),n("span",xn,U(l(i).state.userEmail),1)])]),c(ut,{onResize:ce,minWidth:160,panelRef:x.value},null,8,["panelRef"])],64))],6)):g("",!0)}}},yn=Pe(bn,[["__scopeId","data-v-e8233227"]]),_n={class:"mx-auto p-6 w-[500px] flex flex-col gap-6 max-w-[100vw]"},wn={class:"relative flex"},kn=["placeholder"],zn={class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1"},$n={key:0,class:"absolute top-0 right-0 h-full flex flex-col place-content-center px-2 py-1"},Sn={class:"relative"},An={class:"flex flex-col gap-6 max-h-[70dvh] overflow-auto"},Cn={key:0},Mn={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},Ln={class:"flex flex-col"},In=["onClick"],Fn={class:"grow"},Nn={key:0,class:"flex flex-col gap-6"},Tn={key:0},Rn={class:"mb-2 capitalize text-zinc-400 dark:text-zinc-200"},En={class:"flex flex-col"},qn=["href"],Un={key:0,class:"w-5 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden"},Dn={class:"uppercase text-sm"},On={key:1,class:"w-5 aspect-square bg-zinc-200 dark:bg-zinc-700 rounded font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden overflow-hidden"},Pn=["src"],Bn=["innerHTML"],Hn={key:0,class:"absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-white dark:from-zinc-900 to-transparent pointer-events-none"},Wn={class:"flex flex-row gap-6 items-center text-zinc-500"},Kn={class:"flex flex-row gap-2 items-center"},Vn={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},jn={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},Gn={class:"text-sm"},Jn={class:"flex flex-row gap-2 items-center"},Qn={class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg"},Xn={class:"text-sm"},Yn={class:"flex flex-row gap-2 items-center"},Zn={class:"text-sm"},es={__name:"index",setup(e){const s=Ne(),{setColorScheme:i,prefersDark:f,globalOverride:h}=We();xt(),y(!1);const d=y(""),x=y(null),k=y({}),E=y(!1),H=y(""),A=y(-1),V=y([{id:"new-post",name:(0,window.wp.i18n.__)("New Post","uixpress"),icon:"add",action:()=>z()},{id:"new-page",name:(0,window.wp.i18n.__)("New Page","uixpress"),icon:"add",action:()=>F()},{id:"view-dashboard",name:(0,window.wp.i18n.__)("View dashboard","uixpress"),icon:"equalizer",action:()=>window.location.href=`${s.state.adminUrl}`},{id:"view-site",name:(0,window.wp.i18n.__)("View site","uixpress"),icon:"home",action:()=>window.location.href=`${s.state.siteURL}`},{id:"site-settings",name:(0,window.wp.i18n.__)("Site settings","uixpress"),icon:"tune",action:()=>window.location.href=`${s.state.adminUrl}options-general.php`},{id:"dark-mode",name:(0,window.wp.i18n.__)("Dark mode","uixpress"),icon:"dark_mode",action:()=>i("dark"),hidden:!1},{id:"light-mode",name:(0,window.wp.i18n.__)("Light mode","uixpress"),icon:"light_mode",action:()=>i("light"),hidden:!1}]);if(!s.state.canManageOptions){const u=V.value.findIndex(m=>m.id=="site-settings");V.value.splice(u,1)}const j=Q(()=>{if(!d.value)return V.value.filter(m=>!m.hidden);const u=d.value.toLowerCase();return V.value.filter(m=>m.name.toLowerCase().includes(u)&&!m.hidden)}),b=Q(()=>{const u=Object.entries(k.value).flatMap(([m,S])=>S.map(L=>({...L,category:m})));return[...j.value.map(m=>({...m,category:"quickActions"})),...u]}),w=u=>{const S=C.value.find(L=>L.slug==u);return S?S.name:u},q=Q(()=>{var m,S,L,I,ce,ee,te;let u=[];if(!Array.isArray(s.state.adminMenu))return[];for(let N of s.state.adminMenu)if(N.type!="separator"&&!((m=N==null?void 0:N.settings)!=null&&m.hidden)&&(ye(d.value,((S=N==null?void 0:N.settings)==null?void 0:S.name)||N.name,N.url)&&u.push({url:N.url,name:((L=N==null?void 0:N.settings)==null?void 0:L.name)||N.name,id:`${N.url}-${N.name}`}),!!Array.isArray(N.submenu)))for(let W of N.submenu)W.type!="separator"&&((I=W==null?void 0:W.settings)!=null&&I.hidden||ye(d.value,W.name||((ce=W==null?void 0:W.settings)==null?void 0:ce.name),W.url)&&u.push({url:W.url,name:`<span class="text-zinc-400 dark:text-zinc-400">${((ee=N==null?void 0:N.settings)==null?void 0:ee.name)||N.name} ></span> ${((te=W==null?void 0:W.settings)==null?void 0:te.name)||W.name}`,id:`${W.url}-${W.name}`}));return u}),z=async()=>{window.location.href=`${s.state.adminUrl}post-new.php`},F=async()=>{window.location.href=`${s.state.adminUrl}post-new.php?post_type=page`},C=Q(()=>{const u=s.state.uixpress_settings.search_post_types;let m=[{name:"posts",slug:"post",endpoint:"wp/v2/posts",searchParam:"search"},{name:"pages",slug:"page",endpoint:"wp/v2/pages",searchParam:"search"}];return Array.isArray(u)&&u.length>0&&(m.splice(0,2),m=[...u.map(L=>({...L,endpoint:L.rest_base,searchParam:"search"})),...m]),m.push({name:"categories",slug:"category",endpoint:"wp/v2/categories",searchParam:"search"}),s.state.canManageOptions&&m.push({name:"users",slug:"user",endpoint:"wp/v2/users",searchParam:"search"}),m}),D=async()=>{if(d.value.trim()!==""&&!(d.value.length<1)){E.value=!0;try{const u=C.value.map(({name:S,endpoint:L,searchParam:I,slug:ce})=>He({endpoint:L,params:{[I]:d.value,per_page:5,context:"view",author:s.state.canManageOptions?"":s.state.userID}}).then(ee=>({slug:ce,data:ee.data})));(await Promise.all(u)).forEach(({slug:S,data:L})=>{k.value[S]=L})}catch(u){console.error("Error performing search:",u)}finally{E.value=!1}}},_=(u,m)=>{let S;return(...L)=>{clearTimeout(S),S=setTimeout(()=>u(...L),m)}},v=u=>{document.activeElement.blur(),x.value.show(u),A.value=0},re=_(D,300);Fe(d,(u,m)=>{u!==m&&(re(),A.value=0)});const se=u=>{(u.metaKey||u.ctrlKey)&&u.key==="k"&&(u.preventDefault(),v()),u.key==="Escape"&&x.value.close()},ae=u=>{u.preventDefault(),A.value=(A.value+1)%b.value.length},me=u=>{u.preventDefault(),A.value=(A.value-1+b.value.length)%b.value.length},oe=u=>{u.preventDefault();const m=b.value[A.value];m&&(m.category==="quickActions"?m.action():window.location.href=J(m.category,m),x.value.close())},J=(u,m)=>u=="menu"?m.url:u=="post"||u=="page"?`${s.state.adminUrl}post.php?post=${m.id}&action=edit`:u=="user"?`${s.state.adminUrl}user-edit.php?user_id=${m.id}`:`${s.state.adminUrl}post.php?post=${m.id}&action=edit`;return Oe(()=>{window.addEventListener("keydown",se)}),vt(()=>{window.removeEventListener("keydown",se)}),xe(()=>{H.value&&H.value.focus()}),xe(()=>{const u=V.value.find(S=>S.id=="dark-mode"),m=V.value.find(S=>S.id=="light-mode");if(h.value){u.hidden=!0,m.hidden=!0;return}f.value?(u.hidden=!0,m.hidden=!1):(u.hidden=!1,m.hidden=!0)}),Fe(()=>d.value,()=>{k.value.menu=q.value}),(u,m)=>(t(),r(B,null,[c(ve,{type:"transparent",onClick:ue(v,["prevent"]),"aria-label":"Open search"},{default:M(()=>[c(R,{icon:"search",class:"text-xl"})]),_:1}),c(bt,{ref_key:"searchmodal",ref:x,position:"top",onKeydown:u.handleModalKeyDown},{default:M(()=>[n("div",_n,[n("div",wn,[Be(n("input",{class:"px-2 py-2 border border-zinc-200 dark:border-zinc-700 dark:bg-transparent rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm pl-8 dark:text-zinc-300","onUpdate:modelValue":m[0]||(m[0]=S=>d.value=S),placeholder:u.__("Search posts, pages, categories, users...","uixpress"),autofocus:"",name:"search",icon:"search",onKeyup:[be(ae,["down"]),be(me,["up"]),be(oe,["enter"])],autocomplete:"off",ref_key:"searchInput",ref:H},null,40,kn),[[it,d.value]]),n("div",zn,[c(R,{icon:"search",class:"text-lg text-zinc-400"})]),c(he,null,{default:M(()=>[E.value?(t(),r("div",$n,m[2]||(m[2]=[n("svg",{class:"animate-spin text-indigo-500 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):g("",!0)]),_:1})]),n("div",Sn,[n("div",An,[j.value.length?(t(),r("div",Cn,[n("div",Mn,U(u.__("Quick Actions","uixpress")),1),n("ul",Ln,[(t(!0),r(B,null,de(j.value,(S,L)=>(t(),r("li",{key:S.id,class:G(["p-2 rounded-lg transition-all cursor-pointer pl-3",L===A.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[n("a",{onClick:ue(I=>{S.action(),x.value.close()},["prevent"]),class:"flex flex-row items-center gap-3"},[c(R,{icon:S.icon,class:"text-zinc-400 text-lg"},null,8,["icon"]),n("span",Fn,U(S.name),1),c(R,{icon:"chevron_right",class:"text-zinc-400"})],8,In)],2))),128))])])):g("",!0),c(he,{mode:"out-in",name:"slide-up"},{default:M(()=>[k.value?(t(),r("div",Nn,[(t(!0),r(B,null,de(k.value,(S,L)=>(t(),r(B,{key:L},[S.length?(t(),r("div",Tn,[n("div",Rn,U(w(L)),1),n("ul",En,[(t(!0),r(B,null,de(S,(I,ce)=>{var ee;return t(),r("li",{key:I.id,class:G(["p-2 rounded-lg transition-all cursor-pointer pl-3",b.value.findIndex(te=>te.id===I.id&&te.category===L)===A.value?"bg-zinc-100 dark:bg-zinc-800 text-zinc-950 dark:text-zinc-100":"hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-zinc-100"])},[n("a",{href:J(L,I),class:"flex flex-row items-center gap-3",onClick:m[1]||(m[1]=te=>x.value.close())},[L=="user"?(t(),r("div",Un,[n("span",Dn,U(I.slug.charAt(0)),1)])):g("",!0),L=="attachment"?(t(),r("div",On,[I.mime_type.includes("image")?(t(),r("img",{key:0,src:I.source_url,class:"w-5 h-5 object-contain object-center"},null,8,Pn)):(t(),O(R,{key:1,icon:"description"}))])):g("",!0),n("span",{class:"grow truncate",innerHTML:I.name||((ee=I.title)==null?void 0:ee.rendered)||I.email},null,8,Bn),c(R,{icon:"chevron_right",class:"text-zinc-400"})],8,qn)],2)}),128))])])):g("",!0)],64))),128))])):g("",!0)]),_:1})]),!E.value&&b.value.length>20?(t(),r("div",Hn)):g("",!0)]),n("div",Wn,[n("div",Kn,[n("span",Vn,[c(R,{icon:"arrow_up"})]),n("span",jn,[c(R,{icon:"arrow_down"})]),n("span",Gn,U(u.__("to navigate","uixpress")),1)]),n("div",Jn,[n("span",Qn,[c(R,{icon:"return"})]),n("span",Xn,U(u.__("to select","uixpress")),1)]),n("div",Yn,[m[3]||(m[3]=n("span",{class:"p-1 border border-zinc-200 dark:border-zinc-700 rounded-lg text-xs"},"Esc",-1)),n("span",Zn,U(u.__("to close","uixpress")),1)])])])]),_:1},8,["onKeydown"])],64))}},ts=Pe(es,[["__scopeId","data-v-ea34e394"]]),ns={class:""},ss={__name:"index",setup(e){const s=y(!0),i=y([]),f=y(""),h=y(null),d=Ne(),x=Q(()=>i.value.filter(b=>ye(f.value,b.name,b.url))),k=async(b,w)=>{s.value=!0;const q=["wp-admin-bar-site-name","wp-admin-bar-menu-toggle","wp-admin-bar-app-logo","wp-admin-bar-my-account","wp-admin-bar-wp-logo","wp-admin-bar-search","wp-admin-bar-woocommerce-site-visibility-badge"];if(!b)return s.value=!1;const z=b.querySelectorAll("#wp-admin-bar-root-default > li"),F=b.querySelectorAll("#wp-admin-bar-top-secondary > li"),C=[...z,...F],D=[];for(let v of C){const re=v.getAttribute("id");if(q.includes(re))continue;const se=v.querySelector(":scope > .ab-item"),ae=v.querySelector(":scope > .ab-item > .screen-reader-text"),me=v.querySelector(":scope > .ab-item > .ab-label"),oe=v.querySelector(":scope > .ab-item > .ab-icon"),J=v.querySelector(":scope > .ab-item .svg");if(!se)continue;const u=se.getAttribute("href"),m=se.getAttribute("target"),S=ae?ae.innerText:"";let L;J&&(L=J.getAttribute("style"));let I;if(oe){const te=window.getComputedStyle(oe,"::before");if(te){const{content:Le,fontFamily:a}=te;I={content:Le,fontFamily:a}}const N=window.getComputedStyle(oe),W=N["background-image"]?N["background-image"]:!1;W&&W!="none"&&(oe.style["background-image"]=W,oe.classList.add("svg"))}let ce;if(me)ce=me.innerText;else{const N=se.innerHTML.split("<");ce=N[0]!==""?N[0]:S}const ee=E(v);if(D.push({url:u,target:m,name:ce,id:re,submenu:ee,screenReaderName:S,iconStyle:L,before:I}),w){const te=v.cloneNode(!0);h.value.appendChild(te)}else h.value.appendChild(v)}i.value=[...D],localStorage.setItem("uixpress_toolbar",JSON.stringify([...D])),s.value=!1},E=b=>{const w=b.querySelectorAll(":scope > .ab-sub-wrapper > .ab-submenu > li");if(!w)return;let q=[];for(let z of w){const F=z.querySelector(":scope > .ab-item");if(!F)continue;const C=F.getAttribute("href"),D=F.getAttribute("target");let _=F.innerText;const v=E(z);q.push({name:_,url:C,target:D,submenu:v})}return q},H=Q(()=>{let b="";const w=[["wp-admin-bar-comments","chat"],["wp-admin-bar-updates","update"],["wp-admin-bar-new-content","library_add"],["wp-admin-bar-customize","palette"]],q=d.state.pluginBase;for(let z of w){const F=`${q}assets/icons/${z[1]}.svg`;b+=`
	  #${z[0]} .ab-icon::before{
		content: '';
		height:1.2rem;
		width:1.2rem;
		min-height:1.2rem;
		min-width:1.2rem;
		background-color:currentColor;
		-webkit-mask: url(${F}) no-repeat center;
		-webkit-mask-size: contain;
		mask: url(${F}) no-repeat center;
		mask-size: contain;
		line-height: 1rem;
        display: block;
	  }`}return b+=`
  #wp-admin-bar-customize, #wp-admin-bar-edit{
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  #wp-admin-bar-customize::before, #wp-admin-bar-edit::before{
    content: '';
    height:1.2rem;
    width:1.2rem;
    min-height:1.2rem;
    min-width:1.2rem;
    background-color:currentColor;
    -webkit-mask: url(${q}assets/icons/palette.svg) no-repeat center;
    -webkit-mask-size: contain;
    mask: url(${q}assets/icons/palette.svg) no-repeat center;
    mask-size: contain;
    line-height: 1rem;
    display: block;
    color: rgb(var(--uix-base-500) / var(--tw-text-opacity));
  }
  #wp-admin-bar-edit::before{
    -webkit-mask: url(${q}assets/icons/edit.svg) no-repeat center;
    mask: url(${q}assets/icons/edit.svg) no-repeat center;
  }`,b}),A=b=>{let w="";return zt(b.before)?(w+=`content: ${b.before.content};`,w+=`font-family: ${b.before.fontFamily};`,w+="width: 1.2rem;",w+="min-width: 1.2rem;"):(w+="width: 0rem;",w+="min-width: 0rem;"),b.iconStyle&&(w+=b.iconStyle),`
  #${b.id} .ab-icon::before{
    content: '';
    ${w}
    height:1.2rem;
    min-height:1.2rem;
    font-size: 1.2rem;
    line-height: 1.2rem;
    filter: contrast(0.1);
    background-repeat: no-repeat;
    background-size: contain;
  }`};Q(()=>getBlockOption("subMenuStyle",props.block)||"inline");const V=()=>{const w=localStorage.getItem("uixpress_toolbar");if(!w)return null;const q=JSON.parse(w);Array.isArray(q)&&(i.value=q)},j=xe(()=>{if(!h.value)return;V();const b=document.querySelector("#wpadminbar");k(b,!0),setTimeout(()=>{h.value.replaceChildren(),k(b)},500),j()});return(b,w)=>(t(),r("div",ns,[n("ul",{class:"flex flex-row gap-5 items-center",ref_key:"toolbarnode",ref:h,id:"wpadminbar"},null,512),(t(),O(Me("style"),null,{default:M(()=>[Ce(U(H.value),1)]),_:1})),(t(),O(Me("style"),null,{default:M(()=>[(t(!0),r(B,null,de(x.value,q=>(t(),r(B,null,[Ce(U(A(q)),1)],64))),256))]),_:1}))]))}},as={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center text-xs font-bold leading-none text-rose-100 transform right-0 top-0 bg-rose-600 dark:bg-rose-700 rounded-full aspect-square h-2"},os={class:"flex flex-row items-center place-content-between"},rs={class:"text-2xl font-semibold text-zinc-900 dark:text-zinc-100"},is=["title"],ls={key:0,class:"leading-loose p-2 rounded-lg bg-emerald-100 dark:bg-emerald-800 border border-solid border-emerald-200 dark:border-emerald-700 dark:text-zinc-300"},at=".notice:not(table .notice):not(#message.notice):not(.hide-if-js .notice):not(.themes .notice):not(.notice.hidden):not(.notice[aria-hidden='true']):not(.notice.hide-if-js)",us={__name:"index",setup(e){const s=y(0),i=y(null),f=y(!1),h=y(!1),d=y(null),x=y(null),k=y(!1),E=y(!1),H=y(null),A=y(800),V=()=>{const C=document.querySelectorAll(at);if(!C){s.value=0;return}s.value=0;for(let D of[...C])!D.innerText||D.id=="setting-error-settings_updated"||!j(D)||s.value++;s.value>0&&(E.value=!0,setTimeout(()=>{E.value=!1},500))},j=C=>{const D=window.getComputedStyle(C);return D.display!=="none"&&D.visibility!=="hidden"},b=()=>{if(!(!i.value||x.value)&&(x.value=document.querySelectorAll(at),!!x.value))for(let C of[...x.value])!C.innerText||C.id=="setting-error-settings_updated"||i.value.appendChild(C)},w=C=>{d.value&&(d.value.contains(C.target)||(f.value=!1))},q=C=>{f.value=!1},z=()=>{b(),f.value=!0},F=C=>{A.value=C};return xe(()=>{f.value&&Ae(()=>h.value=!0),f.value||Ae(()=>h.value=!1)}),Oe(()=>{k.value=!0,V()}),(C,D)=>(t(),r(B,null,[c(ve,{type:"transparent",title:C.__("Notifications","uixpress"),class:"max-md:hidden",onClick:D[0]||(D[0]=_=>z())},{default:M(()=>[n("div",{class:G(["relative",{"animate-jiggle":E.value}])},[c(R,{icon:"notifications-2",class:"text-2xl"}),c(he,null,{default:M(()=>[s.value>0?(t(),r("span",as)):g("",!0)]),_:1})],2)]),_:1},8,["title"]),k.value?(t(),O(rt,{key:0,to:"body"},[n("div",{class:"fixed top-0 left-0 right-0 bottom-0 bg-zinc-900/20 dark:bg-zinc-900/60 flex flex-row place-content-end z-[99999] max-w-screen",onClick:w,style:Se(f.value?"":"display:none!important;")},[c(he,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform translate-x-full","enter-to-class":"transform translate-x-0","leave-active-class":"transition duration-300 ease-in","leave-from-class":"transform translate-x-0","leave-to-class":"transform translate-x-full"},{default:M(()=>[Be(n("div",{ref_key:"panel",ref:d,class:"h-screen max-h-screen overflow-auto bg-white dark:bg-zinc-900 border-l border-zinc-200 dark:border-zinc-700 max-w-screen relative shadow-lg rounded-tl-lg rounded-bl-lg relative dark:shadow-zinc-950 box-border"},[n("div",{class:"flex flex-col gap-6 p-8 max-w-full",id:"uixp-notification-list",ref_key:"notificationsList",ref:H,style:Se(`width:${A.value}px`)},[c(ut,{onResize:F,minWidth:160,panelRef:H.value,storageKey:"uixp-notification-width",position:"left"},null,8,["panelRef"]),n("div",os,[n("div",rs,U(C.__("Notifications","uixpress")),1),n("div",{class:"hover:bg-zinc-100 dark:hover:bg-zinc-800 p-1 rounded-lg cursor-pointer text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-all",title:C.__("Close","uixpress"),onClick:D[1]||(D[1]=_=>q())},[c(R,{icon:"close",class:"text-xl"})],8,is)]),s.value?g("",!0):(t(),r("div",ls,U(C.__("No notifications","uixpress")),1)),n("div",{class:"flex flex-col gap-3",ref_key:"notificationList",ref:i},null,512)],4)],512),[[gt,h.value]])]),_:1})],4)])):g("",!0)],64))}},cs={key:1,class:"flex flex-row items-center gap-4 hidden max-lg:flex"},ds={class:"absolute top-0 right-0 p-4"},ms={class:"relative grow max-lg:overflow-hidden flex flex-row items-center"},ps=["href"],fs=["src"],vs=["href"],gs={class:"flex flex-row items-center gap-4 w-full max-lg:overflow-auto no-scrollbar pr-16"},hs={class:"flex flex-row items-center gap-1"},xs=["href"],bs=["href"],ys={class:"lowercase relative text-sm",style:{top:"calc(((-1em / 1.5) + 1ex) / 2)"}},_s=["src"],ws={class:"flex flex-col gap-2 w-40"},ks={class:""},zs={class:"flex flex-col gap-2"},$s={class:"dark:text-zinc-400"},Ss={class:"dark:text-zinc-400"},As={class:"dark:text-zinc-400"},Cs={class:"flex flex-row items-center gap-2 place-content-between"},Ms={__name:"index",props:["frontend"],setup(e){const s=Ne(),i=y(!1),f=y(!1),h=y(null),d=y(!1),x=y(!1),k=y(!1),E=y(!0),H=y(!0),A=y(null),{userPreference:V,setColorScheme:j,globalOverride:b,prefersDark:w}=We(),q=async()=>{const _=await lt(s.state.userEmail);f.value=`https://gravatar.com/avatar/${_}?d=blank`};Q(()=>route.matched.map(_=>({path:_.path,name:typeof _.meta.name=="function"?_.meta.name(route):_.meta.name})));const z=async()=>{k.value=!0,await He({endpoint:"wc/v3/logout",params:{},type:"POST"}),k.value=!1,window.location=s.state.loginUrl},F=()=>{const _=document.querySelector("#screen-options-wrap"),v=document.querySelector("#screen-meta");!_||!v||(d.value?(_.style.display="none",v.style.display="none",d.value=!1):(_.style.display="block",v.style.display="block",_.classList.remove("hidden"),d.value=!0))},C=()=>{const _=document.querySelector("#contextual-help-wrap"),v=document.querySelector("#screen-meta");!_||!v||(x.value?(_.style.display="none",v.style.display="none",x.value=!1):(_.style.display="block",v.style.display="block",_.classList.remove("hidden"),x.value=!0))},D=()=>{const _=document.querySelector("#contextual-help-wrap"),v=document.querySelector("#screen-options-wrap");_||(E.value=!1),v||(H.value=!1)};return xe(()=>{if(A.value){const _=A.value.getBoundingClientRect();document.documentElement.style.setProperty("--uixp-toolbar-height",`${_.height}px`)}}),D(),q(),(_,v)=>{var re,se,ae,me,oe,J,u,m,S,L;return t(),r("div",{id:"uixp-toolbar",class:G(["px-6 flex flex-row items-center pointer-events-auto max-w-full gap-6 max-lg:overflow-hidden",e.frontend?"":"py-3"]),ref_key:"toolbarContainer",ref:A},[e.frontend?(t(),O(Me("style"),{key:0},{default:M(()=>v[8]||(v[8]=[Ce(" #uixp-toolbar { height: 32px; } @media screen and (max-width: 782px) { #uixp-toolbar { height: 46px; } } ")])),_:1,__:[8]})):g("",!0),e.frontend?g("",!0):(t(),r("div",cs,[c(ve,{type:"transparent",title:_.__("Toggle menu","uixpress"),onClick:v[0]||(v[0]=I=>i.value=!i.value)},{default:M(()=>[c(R,{icon:"menu",class:"text-xl"})]),_:1},8,["title"]),c(he,null,{default:M(()=>[i.value?(t(),r("div",{key:0,class:"fixed top-0 left-0 right-0 bottom-0 h-dvh w-dvh z-[9999999] bg-zinc-900/10 flex flex-row",onClick:v[3]||(v[3]=I=>i.value=!1)},[n("div",{class:"bg-white dark:bg-zinc-900 w-auto max-w-full shadow-lg border-r border-zinc-200 dark:border-zinc-700 h-full relative",onClick:v[2]||(v[2]=ue(()=>{},["stop"]))},[c(yn,{mobile:!0}),n("div",ds,[c(ve,{type:"transparent",title:_.__("Toggle menu","uixpress"),onClick:v[1]||(v[1]=I=>i.value=!1)},{default:M(()=>[c(R,{icon:"close",class:"text-xl"})]),_:1},8,["title"])])])])):g("",!0)]),_:1})])),n("div",ms,[(se=(re=l(s).state)==null?void 0:re.uixpress_settings)!=null&&se.logo&&e.frontend?(t(),r("a",{key:0,href:l(s).state.adminUrl,class:"h-5 mr-6"},[n("img",{src:l(w)&&((me=(ae=l(s).state)==null?void 0:ae.uixpress_settings)!=null&&me.dark_logo)?l(s).state.uixpress_settings.dark_logo:l(s).state.uixpress_settings.logo,class:"h-full"},null,8,fs)],8,ps)):e.frontend?(t(),r("a",{key:1,href:l(s).state.adminUrl,class:"mr-6"},[c(R,{icon:"uipress",class:"text-xl dark:text-white"})],8,vs)):g("",!0),n("div",gs,[c(ss)]),v[9]||(v[9]=n("div",{class:"hidden max-lg:block absolute right-0 w-16 top-0 bottom-0 bg-gradient-to-l from-white to-transparent dark:from-zinc-900 pointer-events-none",id:"uixp-toolbar-overlay"},null,-1))]),n("div",hs,[(J=(oe=l(s).state)==null?void 0:oe.uixpress_settings)!=null&&J.disable_search?g("",!0):(t(),O(ts,{key:0})),H.value&&!((m=(u=l(s).state)==null?void 0:u.uixpress_settings)!=null&&m.hide_screenoptions)?(t(),O(ve,{key:1,type:"transparent",title:_.__("Screen options","uixpress"),onClick:F,class:"max-md:hidden"},{default:M(()=>[c(R,{icon:"tune",class:"text-xl"})]),_:1},8,["title"])):g("",!0),E.value&&!((L=(S=l(s).state)==null?void 0:S.uixpress_settings)!=null&&L.hide_help_toggle)?(t(),O(ve,{key:2,type:"transparent",title:_.__("Help","uixpress"),onClick:C,class:"max-md:hidden"},{default:M(()=>[c(R,{icon:"help_alt",class:"text-2xl"})]),_:1},8,["title"])):g("",!0),e.frontend?e.frontend?(t(),r("a",{key:4,href:l(s).state.adminUrl},[c(ve,{type:"transparent",title:_.__("View dashboard","uixpress")},{default:M(()=>[c(R,{icon:"dashboard",class:"text-xl"})]),_:1},8,["title"])],8,bs)):g("",!0):(t(),r("a",{key:3,href:l(s).state.siteURL},[c(ve,{type:"transparent",title:_.__("View site","uixpress")},{default:M(()=>[c(R,{icon:"home",class:"text-xl"})]),_:1},8,["title"])],8,xs)),e.frontend?g("",!0):(t(),O(us,{key:5})),n("div",{class:"w-6 aspect-square bg-zinc-700 dark:bg-indigo-700 text-white rounded-full font-semibold flex place-content-center items-center justify-center shrink-0 relative overflow-hidden ml-2 cursor-pointer dark:hover:bg-indigo-800 hover:bg-zinc-900 transition-colors border border-zinc-200 dark:border-zinc-700",onClick:v[4]||(v[4]=(...I)=>h.value.show&&h.value.show(...I))},[n("span",ys,U(l(s).state.userName.charAt(0)),1),f.value?(t(),r("img",{key:0,src:f.value,class:"absolute w-full h-full"},null,8,_s)):g("",!0)]),c(ht,{ref_key:"contextmenu",ref:h,teleport:!0},{default:M(()=>[n("div",ws,[l(b)?g("",!0):(t(),r(B,{key:0},[n("div",ks,U(_.__("Theme","uixpress")),1),n("div",zs,[n("label",{class:"flex flex-row items-center gap-2 px-2 mt-2 cursor-pointer",onClick:v[5]||(v[5]=ue(I=>l(j)("system"),["stop","prevent"]))},[c(Ee,{dynamic:l(V)=="system"},null,8,["dynamic"]),n("span",$s,U(_.__("System","uixpress")),1)]),n("label",{class:"flex flex-row items-center gap-2 px-2 cursor-pointer",onClick:v[6]||(v[6]=ue(I=>l(j)("light"),["stop","prevent"]))},[c(Ee,{dynamic:l(V)=="light"},null,8,["dynamic"]),n("span",Ss,U(_.__("Light","uixpress")),1)]),n("label",{class:"flex flex-row items-center gap-2 px-2 cursor-pointer",onClick:v[7]||(v[7]=ue(I=>l(j)("dark"),["stop","prevent"]))},[c(Ee,{dynamic:l(V)=="dark"},null,8,["dynamic"]),n("span",As,U(_.__("Dark","uixpress")),1)])]),v[10]||(v[10]=n("div",{class:"my-2 mb-1 border-t border-zinc-200 dark:border-zinc-700"},null,-1))],64)),c(ve,{type:"transparent",class:"shrink-0",loading:k.value,onClick:z,title:_.__("Logout","uixpress")},{default:M(()=>[n("span",Cs,[n("span",null,U(_.__("Logout","uixpress")),1),c(R,{icon:"logout",class:"text-lg"})])]),_:1},8,["loading","title"])])]),_:1},512)])],2)}}},Ws=Pe(Ms,[["__scopeId","data-v-c958f12d"]]);export{yn as A,Ws as T,Hs as s};
//# sourceMappingURL=index-XtsS54p_.js.map
