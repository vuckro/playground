import{E as we,z as se,A as me,d as p,b as n,G as Y,g as t,ah as Be,e as y,F as k,f as S,B as ie,m as A,h as i,i as D,c as Me,H as Re,L as H,w as M,T as ye,u as Ge,r as w,J as le,a as Z,t as x,_,C as L,ai as ge,q as C,n as E,O as Ye,l as O}from"./index-BwRceJDo.js";import{_ as te,a as Je}from"./index-De0QlMdc.js";import{_ as xe}from"./index-bl3BAxE_.js";import{_ as Fe}from"./index-B3EPg5XS.js";import{f as $e}from"./index-ao0OFfwa.js";const Xe={class:"relative flex flex-row items-stretch"},qe=["value","disabled","innerHTML"],Ke=["label"],el=["value","innerHTML"],ll={class:"absolute right-0 top-0 bottom-0 px-2 py-1 z-[1] flex pointer-events-none"},Nt={__name:"index",props:we(["options","categories"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const I=se(),h=me(d,"modelValue");return(b,j)=>(n(),p("div",Xe,[Y(t("select",ie(A(I),{"onUpdate:modelValue":j[0]||(j[0]=c=>h.value=c),class:"bg-white dark:bg-transparent border border-zinc-200 dark:border-zinc-700 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 dark:focus:ring-indigo-600/10 dark:focus:border-indigo-600/10 block w-full px-2 py-1 appearance-none pr-8"}),[(n(!0),p(k,null,S(d.options,c=>(n(),p("option",{value:c.value,disabled:!!c.disabled,innerHTML:c.label},null,8,qe))),256)),d.categories?(n(!0),p(k,{key:0},S(d.categories,c=>(n(),p("optgroup",{label:c.label},[(n(!0),p(k,null,S(c.items,u=>(n(),p("option",{value:u.value,innerHTML:u.label},null,8,el))),256))],8,Ke))),256)):y("",!0)],16),[[Be,h.value]]),t("div",ll,[i(D,{icon:"unfold",class:"text-lg my-auto"})])]))}},tl={class:"relative flex"},al={key:0,class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1"},sl={key:1,class:"absolute top-0 right-0 h-full flex flex-col place-content-center p-1"},ae={__name:"index",props:we(["icon","copy","value"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const I=se(),h=d,b=me(d,"modelValue");h.value&&(b.value=h.value);const j=Me(()=>{let u="";return h.icon&&(u+="pl-8"),h.copy&&(u+=" pr-8"),u}),c=async()=>{try{await navigator.clipboard.writeText(b.value),H({title:"Text copied to clipboard",type:"success"})}catch(u){console.error("Failed to copy text: ",u)}};return(u,v)=>(n(),p("div",tl,[Y(t("textarea",ie({"onUpdate:modelValue":v[0]||(v[0]=s=>b.value=s),class:["px-2 py-2 border border-zinc-200 dark:border-zinc-700 dark:bg-transparent rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm",j.value],rows:"3"},A(I)),null,16),[[Re,b.value]]),d.icon?(n(),p("div",al,[i(D,{icon:d.icon,class:"text-lg text-zinc-400"},null,8,["icon"])])):y("",!0),d.copy?(n(),p("div",sl,[t("div",{class:"p-1 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-400 hover:text-zinc-900 cursor-pointer",onClick:c},[i(D,{icon:"duplicate",class:"text-base"})])])):y("",!0)]))}},il={class:"relative inline-flex"},nl=["checked"],ol={key:0,class:"absolute inset-0 flex flex-col place-content-center"},rl={__name:"checkbox",props:["isactive"],setup(d){const I=se();return(h,b)=>(n(),p("div",il,[t("input",ie({type:"checkbox",checked:d.isactive,class:"appearance-none w-4 h-4 text-indigo-600 bg-zinc-100 border-zinc-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-zinc-800 focus:ring-2 dark:bg-zinc-700 dark:border-zinc-600 checked:bg-indigo-500"},A(I)),null,16,nl),i(ye,null,{default:M(()=>[d.isactive?(n(),p("div",ol,[i(D,{icon:"tick",class:"text-white mx-auto"})])):y("",!0)]),_:1})]))}},Ie="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAxMjAgMTIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiNFRkYxRjMiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzMuMjUwMyAzOC40ODE2QzMzLjI2MDMgMzcuMDQ3MiAzNC40MTk5IDM1Ljg4NjQgMzUuODU0MyAzNS44NzVIODMuMTQ2M0M4NC41ODQ4IDM1Ljg3NSA4NS43NTAzIDM3LjA0MzEgODUuNzUwMyAzOC40ODE2VjgwLjUxODRDODUuNzQwMyA4MS45NTI4IDg0LjU4MDcgODMuMTEzNiA4My4xNDYzIDgzLjEyNUgzNS44NTQzQzM0LjQxNTggODMuMTIzNiAzMy4yNTAzIDgxLjk1NyAzMy4yNTAzIDgwLjUxODRWMzguNDgxNlpNODAuNTAwNiA0MS4xMjUxSDM4LjUwMDZWNzcuODc1MUw2Mi44OTIxIDUzLjQ3ODNDNjMuOTE3MiA1Mi40NTM2IDY1LjU3ODggNTIuNDUzNiA2Ni42MDM5IDUzLjQ3ODNMODAuNTAwNiA2Ny40MDEzVjQxLjEyNTFaTTQzLjc1IDUxLjYyNDlDNDMuNzUgNTQuNTI0NCA0Ni4xMDA1IDU2Ljg3NDkgNDkgNTYuODc0OUM1MS44OTk1IDU2Ljg3NDkgNTQuMjUgNTQuNTI0NCA1NC4yNSA1MS42MjQ5QzU0LjI1IDQ4LjcyNTQgNTEuODk5NSA0Ni4zNzQ5IDQ5IDQ2LjM3NDlDNDYuMTAwNSA0Ni4zNzQ5IDQzLjc1IDQ4LjcyNTQgNDMuNzUgNTEuNjI0OVoiIGZpbGw9IiM2ODc3ODciLz4NCjwvc3ZnPg==",ul="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyBmaWxsPSJjdXJyZW50Q29sb3IiIHdpZHRoPSI4MDBweCIgaGVpZ2h0PSI4MDBweCIgdmlld0JveD0iLTEyIC0xMiA1MCA1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiwyMUg2YTEsMSwwLDAsMCwwLTJINS4zNzZsMS45NTEtNmg1LjM0NmwxLjk1LDZIMTRhMSwxLDAsMCwwLDAsMmg0YTEsMSwwLDAsMCwwLTJIMTYuNzI3TDExLjc1MSwzLjY5QTEsMSwwLDAsMCwxMC44LDNIOS4yYTEsMSwwLDAsMC0uOTUxLjY5TDMuMjczLDE5SDJhMSwxLDAsMCwwLDAsMlpNOS45MjcsNWguMTQ2bDEuOTUsNkg3Ljk3N1pNMjMsMTZhMSwxLDAsMCwxLTEsMUgxOWExLDEsMCwwLDEsMC0yaC4zNjVsLS41ODYtMS42OTJIMTdhMSwxLDAsMCwxLDAtMmgxLjA4N0wxNy4yODgsOWgtLjU3NmwtLjExMy4zMjdhMSwxLDAsMCwxLTEuODkxLS42NTRsLjM0Ni0xQTEsMSwwLDAsMSwxNiw3aDJhMSwxLDAsMCwxLC45NDUuNjczTDIxLjQ4MSwxNUgyMkExLDEsMCwwLDEsMjMsMTZaIi8+PC9zdmc+",dl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9Ii0xMiAtMTIgNTAgNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik00Ljc1IDE1LjI1VjEyLjI1TTQuNzUgMTIuMjVWOC43NUg2LjI1QzYuODAyMjggOC43NSA3LjI1IDkuMTk3NzIgNy4yNSA5Ljc1VjExLjI1QzcuMjUgMTEuODAyMyA2LjgwMjI4IDEyLjI1IDYuMjUgMTIuMjVINC43NVoiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSA4Ljc1SDkuNzVWMTUuMjVIMTEuMjVDMTIuMzU0NiAxNS4yNSAxMy4yNSAxNC4zNTQ2IDEzLjI1IDEzLjI1VjEwLjc1QzEzLjI1IDkuNjQ1NDMgMTIuMzU0NiA4Ljc1IDExLjI1IDguNzVaIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTguMjUgOC43NUgxNS43NVYxMS43NU0xNS43NSAxNS4yNVYxMS43NU0xNS43NSAxMS43NUgxOC4yNSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",cl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9Ii0xMiAtMTIgNTAgNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNy4yNSA0Ljc1SDYuNzVDNS42NDU0MyA0Ljc1IDQuNzUgNS42NDU0MyA0Ljc1IDYuNzVWMTcuMjVDNC43NSAxOC4zNTQ2IDUuNjQ1NDMgMTkuMjUgNi43NSAxOS4yNUgxNy4yNUMxOC4zNTQ2IDE5LjI1IDE5LjI1IDE4LjM1NDYgMTkuMjUgMTcuMjVWNi43NUMxOS4yNSA1LjY0NTQzIDE4LjM1NDYgNC43NSAxNy4yNSA0Ljc1WiIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTEyIDE1LjI1VjEzLjc1IiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTIgMTEuMjVWMTAuNzUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMiA4LjI1VjcuNzUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMiA1LjI1VjQuNzUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",pl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAtOTYwIDk2MCA5NjAiIHdpZHRoPSIyNHB4IiBmaWxsPSIjZThlYWVkIj48cGF0aCBkPSJNMzYwLTI0MGgyNDBxMTcgMCAyOC41LTExLjVUNjQwLTI4MHEwLTE3LTExLjUtMjguNVQ2MDAtMzIwSDM2MHEtMTcgMC0yOC41IDExLjVUMzIwLTI4MHEwIDE3IDExLjUgMjguNVQzNjAtMjQwWm0wLTE2MGgyNDBxMTcgMCAyOC41LTExLjVUNjQwLTQ0MHEwLTE3LTExLjUtMjguNVQ2MDAtNDgwSDM2MHEtMTcgMC0yOC41IDExLjVUMzIwLTQ0MHEwIDE3IDExLjUgMjguNVQzNjAtNDAwWk0yNDAtODBxLTMzIDAtNTYuNS0yMy41VDE2MC0xNjB2LTY0MHEwLTMzIDIzLjUtNTYuNVQyNDAtODgwaDI4N3ExNiAwIDMwLjUgNnQyNS41IDE3bDE5NCAxOTRxMTEgMTEgMTcgMjUuNXQ2IDMwLjV2NDQ3cTAgMzMtMjMuNSA1Ni41VDcyMC04MEgyNDBabTI4MC01NjB2LTE2MEgyNDB2NjQwaDQ4MHYtNDQwSDU2MHEtMTcgMC0yOC41LTExLjVUNTIwLTY0MFpNMjQwLTgwMHYyMDAtMjAwIDY0MC02NDBaIi8+PC9zdmc+",fe=(d,I)=>{if(!d)return Ie;const h=d.mime_type,b=d.media_type;let j=vl(h);if(b&&b!="image")return j;if(!("media_details"in d)||!("sizes"in d.media_details))return d.source_url;const c=d.media_details.sizes;if(I&&I in c)return c[I].source_url;if("medium"in c)return c.medium.source_url;if("medium_large"in c)return c.medium_large.source_url;if("large"in c)return c.large.source_url;if("full"in c)return c.full.source_url;if("thumbnail"in c)return c.thumbnail.source_url;const u=c[Object.keys(c)[0]]||d.source_url;return u||j},vl=d=>{let I=Ie;return d&&(d.includes("font")&&(I=ul),d.includes("zip")&&(I=cl),d.includes("pdf")&&(I=dl),d.includes("text")&&(I=pl)),I},gl={class:"flex flex-row items-center place-content-between p-6 pb-0"},xl={class:"font-semibold"},fl={class:"flex flex-row gap-3 p-6 border-b border-zinc-200 dark:border-zinc-700 items-center"},wl={class:"grow flex place-items-start gap-3"},ml={class:"flex flex-row gap-2"},Ml={key:0,class:"flex flex-row items-center gap-3"},yl={class:"text-sm"},Il={key:1,class:"flex flex-row items-center gap-3"},Nl={class:"text-sm"},bl={class:"flex flex-col gap-2 p-3"},_l=["onClick"],Dl=["id","value"],hl={class:"flex flex-row items-center gap-3"},jl={class:"flex flex-col gap-2 p-3"},zl=["onClick"],Ll=["id","value"],Tl=["accept"],kl={class:"flex flex-col gap-3 items-center p-3"},Cl=["onClick"],Sl={class:"w-full h-full aspect-square rounded-lg overflow-hidden relative border border-zinc-200 dark:border-zinc-700 p-1 bg-white dark:bg-zinc-900"},Al={class:"bg-zinc-100 dark:bg-zinc-800 rounded-lg relative max-h-full overflow-hidden max-w-full h-full"},Vl=["src"],Ul={key:1,class:"absolute top-0 left-0 right-0 bottom-0 bg-zinc-900/30 pointer-events-none rounded-lg flex flex-col place-content-center justify-center items-center"},El={key:2,class:"absolute p-3 right-0 bottom-0 opacity-0 group-hover/media:opacity-100 transition-opacity"},Hl=["onClick"],Ql=["innerHTML"],Zl={key:2,class:"@[300px]:col-span-3 @[500px]:col-span-4 @[700px]:col-span-6 p-6 flex flex-row place-content-center"},Ol={key:0,class:"flex flex-col place-content-center justify-center items-center gap-2 text-center h-full"},Wl={class:"font-semibold text-xl"},Pl={class:"text-zinc-500"},Bl={class:"flex flex-row items-center place-content-between"},Rl={key:0,class:"grid grid-cols-3 pl-3 pt-6 gap-3"},Gl={class:"text-zinc-500 pt-2"},Yl={class:"col-span-2"},Jl={class:"text-zinc-500 pt-2"},Fl={class:"col-span-2"},$l={class:"text-zinc-500 pt-2"},Xl={class:"col-span-2"},ql={class:"text-zinc-500 pt-2"},Kl={class:"col-span-2"},et={class:"text-zinc-500 pt-2"},lt={class:"col-span-2"},tt={class:"col-span-3 flex flex-row place-content-end"},at={class:"flex min-h-0 my-6 flex items-center flex-row gap-1 place-content-between grow"},st={class:"h-fit w-fit rounded-xl overflow-hidden border border-zinc-200 dark:border-zinc-700 p-2 bg-white dark:bg-zinc-900"},it={class:"bg-zinc-100 dark:bg-zinc-800 rounded-xl"},nt=["src"],ot={class:"flex-none flex flex-col"},rt=["innerHTML"],ut={class:"flex flex-row gap-2"},dt={class:"text-sm text-zinc-500"},ct={key:0,class:"text-sm text-zinc-500"},pt={key:1,class:"text-sm text-zinc-500"},vt={class:"text-sm text-zinc-500"},gt={class:"flex flex-row items-center place-content-between gap-3 p-6 border-t border-zinc-200 dark:border-zinc-700"},xt={class:"grow flex flex-row items-center gap-3 text-sm"},bt={__name:"index",setup(d,{expose:I}){const h=Ge(),b=w(!1),j=w(!1),c=w(!1),u=w([]),v=w([]),s=w(null),ne=w(null),oe=w(null),W=w(null),J=w(0),P=w("preview"),F=w(null),V=w(!1),re=w(null),$=w(!1),X=w(null),Ne=w(null),B=w(null),Q=w(null),q=w(!1),T=w({dragging:!1,fileCount:0,dragCounter:0}),r=w({search:"",per_page:30,page:1,pages:0,total:0,context:"edit",media_type:null,orderby:"date",order:"desc"}),be=[{label:(0,window.wp.i18n.__)("Date","uixpress"),value:"date"},{label:(0,window.wp.i18n.__)("ID","uixpress"),value:"id"},{label:(0,window.wp.i18n.__)("Modified","uixpress"),value:"modified"},{label:(0,window.wp.i18n.__)("Slug","uixpress"),value:"slug"},{label:(0,window.wp.i18n.__)("Title","uixpress"),value:"title"}],ue=[{label:"All Media",value:null},{label:"Images",value:"image"},{label:"Video",value:"video"},{label:"Text",value:"text"},{label:"Applications",value:"application"},{label:"Audio",value:"audio"}],_e={preview:{label:"Preview",value:"preview"},details:{label:"Details",value:"details"}},De=({single:l=!1,chosen:e=[]})=>(U(),c.value=!0,new Promise((o,g)=>{X.value=o,Ne.value=g})),U=async l=>{var g;l?j.value=!0:b.value=!0,J.value++;const e={endpoint:"wp/v2/media",params:r.value,signal:(g=W.value)==null?void 0:g.signal},o=await O(e);J.value--,J.value===0&&(b.value=!1),j.value=!1,o&&(v.value=[...v.value,...o.data],r.value.pages=o.totalPages,r.value.total=o.totalItems)},he=async({target:l})=>{const e=l.scrollTop,o=l.clientHeight,g=l.scrollHeight;e+o>=g-5&&!b.value&&je()},je=()=>{r.value.page!=r.value.pages&&(r.value.page+=1,U(!0))},R=l=>(Array.isArray(u.value)||(u.value=[]),!!u.value.find(e=>e.id==l.id)),ze=(l,e)=>{const o=v.value.findIndex(g=>g.id===l.id);if(e.shiftKey&&Q.value!==null){const g=Math.min(Q.value,o),m=Math.max(Q.value,o),f=v.value.slice(g,m+1);u.value=[...new Set([...u.value,...f])]}else R(l)?u.value=u.value.filter(g=>g.id!==l.id):u.value=[...u.value,l],Q.value=o},de=()=>{u.value=[],Q.value=null},Le=l=>{s.value=l},Te=()=>{const l=v.value.findIndex(e=>e.id==s.value.id);if(l>=1){const e=l-1;s.value=v.value[e]}},ke=()=>{const l=v.value.findIndex(e=>e.id==s.value.id);if(l<v.value.length-1){const e=l+1;s.value=v.value[e]}},Ce=l=>{const e=ue.find(o=>o.value==l);return e?e.label:l},G=async()=>{const l={title:s.value.title.raw,description:s.value.description.raw,caption:s.value.caption.raw,alt_text:s.value.alt_text},e={endpoint:`wp/v2/media/${s.value.id}`,params:{},data:l,type:"POST"};await O(e),H({title:(0,window.wp.i18n.__)("File updated","uixpress"),type:"success"})},Se=async()=>{await F.value.show({title:(0,window.wp.i18n.__)("Are you sure?","uixpress"),message:(0,window.wp.i18n.__)("Are you sure you want to delete this item? This action cannot be undone.","uixpress"),okButton:(0,window.wp.i18n.__)("Yes delete it","uixpress")})&&(V.value=!0,await ce(s.value.id),V.value=!1,s.value=null,H({title:(0,window.wp.i18n.__)("File deleted","uixpress"),type:"success"}))},ce=async l=>{const e={endpoint:`wp/v2/media/${l}`,params:{force:!0},type:"DELETE"};if(!await O(e))return;const g=v.value.findIndex(m=>m.id==l);g>=0&&v.value.splice(g,1)},Ae=async()=>{q.value=!0;for(let l of u.value){const e=l.source_url.split(".").pop().toLowerCase(),o=`${l.title.rendered}.${e}`,m=await(await fetch(l.source_url)).blob(),f=`image/${e==="jpg"?"jpeg":e}`,a=new Blob([m],{type:f}),z=new File([a],o,{type:f}),N=new FormData;N.append("file",z),N.append("title",l.title.rendered),N.append("alt_text",l.alt_text),N.append("caption",l.caption.rendered),N.append("description",l.description.rendered);const ve=await O({endpoint:"wp/v2/media",params:{},type:"POST",data:N,isFormData:!0});ve&&(v.value=[ve.data,...v.value])}q.value=!1,de(),H({title:(0,window.wp.i18n.__)("Files duplicated","uixpress"),type:"success"})},Ve=async()=>{if(await F.value.show({title:(0,window.wp.i18n.__)("Are you sure?","uixpress"),message:(0,window.wp.i18n.__)("Are you sure you want to delete these files? This action cannot be undone.","uixpress"),okButton:(0,window.wp.i18n.__)("Yes delete them","uixpress")})){V.value=!0;for(let e of u.value)await ce(e.id);V.value=!1,u.value=[],H({title:(0,window.wp.i18n.__)("Files deleted","uixpress"),type:"success"})}},pe=async(l,e)=>{T.value.dragging=!1,$.value=!0;const o=e?Ue(l):l.target.files,g=[];for(let m=0;m<o.length;m++){const f=o[m];if(!h.state.mimeTypes.includes(f.type))continue;const z={id:Ye(),name:f.name,size:f.size,type:f.type,mime_type:f.type,lastModified:f.lastModified,uploading:!0,title:{rendered:f.name,raw:f.name},rawFile:f};if(f.type.startsWith("image/")){const N=await He(f);z.source_url=N}g.push(z)}v.value=[...g,...v.value];for(let m of g)await Ee(m.rawFile,m.id);$.value=!1},Ue=l=>{let e=[];if(l.dataTransfer.items)for(let o=0;o<l.dataTransfer.items.length;o++)l.dataTransfer.items[o].kind==="file"&&e.push(l.dataTransfer.items[o].getAsFile());else event.dataTransfer.files&&(e=l.dataTransfer.files);return e},Ee=async(l,e)=>{const o=new FormData;o.append("file",l);const m=await O({endpoint:"wp/v2/media",params:{},type:"POST",data:o,isFormData:!0});if(!m)return;const f=v.value.findIndex(a=>a.id===e);f>=0&&v.value.splice(f,1,m.data),H({title:(0,window.wp.i18n.__)("File uploaded","uixpress"),message:l.name,type:"success"})},He=l=>new Promise(e=>{const o=new FileReader;o.onload=g=>e(g.target.result),o.readAsDataURL(l)}),Qe=l=>{T.value.dragging=!0,T.value.dragCounter++,T.value.dragCounter},Ze=l=>{T.value.dragCounter--,T.value.dragCounter===0&&(T.value.dragging=!1)},Oe=()=>{X.value(u.value),u.value=[],c.value=!1,s.value=null},K=()=>{X.value(!1),u.value=[],c.value=!1,s.value=null},We=l=>{B.value&&(B.value.contains(l.target)||B.value==l.target||K())},ee=Me(()=>u.value?u.value.length:!1),Pe=()=>{r.value.order==="asc"?r.value.order="desc":r.value.order="asc",v.value=[],s.value=null,r.value.page=1,r.value.pages=0,U()};return le(()=>r.value.search,(l,e)=>{W.value&&W.value.abort(),W.value=new AbortController,b.value=!0,s.value=null,r.value.page=1,r.value.pages=0,v.value=[],U()}),le(()=>r.value.orderby,(l,e)=>{v.value=[],s.value=null,r.value.page=1,r.value.pages=0,U()}),le(()=>r.value.media_type,(l,e)=>{v.value=[],s.value=null,r.value.page=1,r.value.pages=0,U()}),I({select:De}),(l,e)=>(n(),Z(ye,null,{default:M(()=>{var o,g,m,f;return[c.value?(n(),p("div",{key:0,class:"fixed top-0 left-0 right-0 h-dvh max-h-dvh max-w-dvw bg-zinc-900/40 flex flex-row z-[99999] items-center place-content-center",onClick:We},[t("div",{class:"w-[900px] max-w-full rounded-xl shadow-lg bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 flex flex-col h-[700px] max-h-[100dvh]",ref_key:"mediapanel",ref:B},[t("div",gl,[t("div",xl,x(l.__("Media Library","uixpress")),1),i(_,{type:"transparent",onClick:K},{default:M(()=>[i(D,{icon:"close"})]),_:1})]),t("div",fl,[t("div",wl,[i(te,{type:"text",modelValue:r.value.search,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.search=a),icon:"search",placeholder:l.__("Search","uixpress")},null,8,["modelValue","placeholder"])]),t("div",ml,[i(_,{type:"default",onClick:e[2]||(e[2]=a=>oe.value.show(a))},{default:M(()=>[r.value.media_type?(n(),p("div",Il,[t("span",Nl,x(Ce(r.value.media_type)),1),i(D,{icon:"close",class:"cursor-pointer",onClick:e[1]||(e[1]=L(a=>r.value.media_type=null,["stop","prevent"]))})])):(n(),p("div",Ml,[t("span",yl,x(l.__("File type","uixpress")),1),i(D,{icon:"unfold"})]))]),_:1}),i(xe,{ref_key:"typesPanel",ref:oe},{default:M(()=>[t("fieldset",bl,[(n(),p(k,null,S(ue,(a,z)=>t("label",{key:z,class:"flex flex-row gap-2 items-center",onClick:N=>r.value.media_type=a.value},[Y(t("input",{type:"radio",id:a.value,name:"orderby",value:a.value,"onUpdate:modelValue":e[3]||(e[3]=N=>r.value.media_type=N)},null,8,Dl),[[ge,r.value.media_type]]),t("span",null,x(a.label),1)],8,_l)),64))])]),_:1},512),i(_,{type:"default",onClick:Pe},{default:M(()=>[t("div",hl,[i(D,{icon:r.value.order=="asc"?"arrow_up":"arrow_down"},null,8,["icon"])])]),_:1}),i(_,{type:"default",onClick:e[4]||(e[4]=a=>ne.value.show(a))},{default:M(()=>[i(D,{icon:"sort",class:"text-lg"})]),_:1}),i(xe,{ref_key:"filterPanel",ref:ne},{default:M(()=>[t("fieldset",jl,[(n(),p(k,null,S(be,(a,z)=>t("label",{key:z,class:"flex flex-row gap-2 items-center",onClick:N=>r.value.orderby=a.value},[Y(t("input",{type:"radio",id:a.value,name:"orderby",value:a.value,"onUpdate:modelValue":e[5]||(e[5]=N=>r.value.orderby=N)},null,8,Ll),[[ge,r.value.orderby]]),t("span",null,x(a.label),1)],8,zl)),64))])]),_:1},512),i(_,{type:"default",class:"text-sm",onClick:e[7]||(e[7]=a=>re.value.click(a)),loading:$.value},{default:M(()=>[C(x(l.__("Upload","uixpress"))+" ",1),t("input",{type:"file",ref_key:"imageupload",ref:re,multiple:"",accept:A(h).state.mimeTypes.join(","),onChange:e[6]||(e[6]=a=>pe(a,!1)),class:"hidden"},null,40,Tl)]),_:1},8,["loading"])])]),t("div",{class:E(["grow overflow-hidden",s.value?"flex flex-row":""])},[t("div",{class:E(["@container max-h-full h-full",s.value?"w-1/2 flex-shrink-0":""])},[t("div",{class:E(["grid gap-3 max-h-full overflow-auto @[300px]:grid-cols-3 @[500px]:grid-cols-4 @[700px]:grid-cols-6 px-6 py-4",T.value.dragging?"bg-indigo-900/20":""]),onScroll:he,onDragenter:L(Qe,["prevent"]),onDragover:e[8]||(e[8]=L(()=>{},["prevent"])),onDragleave:Ze,onDrop:e[9]||(e[9]=L(a=>pe(a,!0),["prevent"]))},[b.value?(n(),p(k,{key:0},S(24,a=>t("div",kl,e[17]||(e[17]=[t("div",{class:"w-full aspect-square rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse"},null,-1),t("div",{class:"w-2/3 h-6 rounded-lg bg-zinc-100 dark:bg-zinc-800 animate-pulse"},null,-1)]))),64)):(n(!0),p(k,{key:1},S(v.value,(a,z)=>(n(),p("div",{class:E(["flex flex-col gap-3 items-center p-3 rounded hover:bg-zinc-100 hover:dark:bg-zinc-800 transition-colors rounded-lg cursor-pointer group/media",R(a)?"bg-zinc-100 dark:bg-zinc-800":""]),onClick:N=>ze(a,N),key:z},[t("div",Sl,[t("div",Al,[t("img",{src:A(fe)(a),class:"w-full object-contain object-center h-full rounded-lg"},null,8,Vl),e[18]||(e[18]=t("div",{class:"absolute top-0 left-0 right-0 bottom-0 bg-zinc-900/30 opacity-0 group-hover/media:opacity-100 transition-opacity pointer-events-none rounded-lg"},null,-1))]),a.uploading?y("",!0):(n(),p("div",{key:0,class:E(["absolute p-3 top-0 left-0 group-hover/media:opacity-100 transition-opacity",R(a)?"opacity-100":"opacity-0"])},[(n(),Z(rl,{isactive:R(a),key:z},null,8,["isactive"]))],2)),a.uploading?(n(),p("div",Ul,e[19]||(e[19]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):y("",!0),a.uploading?y("",!0):(n(),p("div",El,[t("div",{class:"rounded bg-indigo-700 p-1 text-white cursor-pointer",onClick:L(N=>Le(a),["stop","prevent"])},[i(D,{icon:"preview"})],8,Hl)]))]),t("div",{class:"text-sm truncate max-w-full w-full text-center",innerHTML:a.title.rendered},null,8,Ql)],10,Cl))),128)),j.value?(n(),p("div",Zl,e[20]||(e[20]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):y("",!0)],34),!b.value&&!v.value.length?(n(),p("div",Ol,[i(D,{icon:"search",class:"text-4xl"}),t("div",Wl,x(l.__("No results found","uixpress")),1),t("div",Pl,x(l.__("Edit your search criteria, or upload a new file.","uixpress")),1)])):y("",!0)],2),s.value?(n(),p("div",{key:0,class:E(["bg-zinc-100 dark:bg-zinc-800 h-full max-h-full overflow-hidden flex flex-col p-6",s.value?"w-1/2 flex-shrink-0":""])},[t("div",Bl,[i(Je,{options:_e,modelValue:P.value,"onUpdate:modelValue":e[10]||(e[10]=a=>P.value=a),style:{width:"auto"}},null,8,["modelValue"]),i(_,{type:"transparent",onClick:e[11]||(e[11]=L(a=>s.value=null,["stop"]))},{default:M(()=>[i(D,{icon:"close"})]),_:1})]),P.value=="details"?(n(),p("div",Rl,[t("div",Gl,[t("span",null,x(l.__("Title","uixpress")),1)]),t("div",Yl,[i(te,{type:"text",modelValue:s.value.title.raw,"onUpdate:modelValue":e[12]||(e[12]=a=>s.value.title.raw=a),onChange:G},null,8,["modelValue"])]),t("div",Jl,[t("span",null,x(l.__("Alt text","uixpress")),1)]),t("div",Fl,[i(ae,{type:"text",modelValue:s.value.alt_text,"onUpdate:modelValue":e[13]||(e[13]=a=>s.value.alt_text=a),onChange:G},null,8,["modelValue"])]),t("div",$l,[t("span",null,x(l.__("Caption","uixpress")),1)]),t("div",Xl,[i(ae,{type:"text",modelValue:s.value.caption.raw,"onUpdate:modelValue":e[14]||(e[14]=a=>s.value.caption.raw=a),onChange:G},null,8,["modelValue"])]),t("div",ql,[t("span",null,x(l.__("Description","uixpress")),1)]),t("div",Kl,[i(ae,{type:"text",modelValue:s.value.description.raw,"onUpdate:modelValue":e[15]||(e[15]=a=>s.value.description.raw=a),onChange:G},null,8,["modelValue"])]),t("div",et,[t("span",null,x(l.__("URL","uixpress")),1)]),t("div",lt,[i(te,{type:"text",modelValue:s.value.link,"onUpdate:modelValue":e[16]||(e[16]=a=>s.value.link=a),disabled:!0,copy:!0},null,8,["modelValue"])]),t("div",tt,[i(_,{type:"danger",onClick:Se,class:"text-sm",loading:V.value},{default:M(()=>[C(x(l.__("Delete file","uixpress")),1)]),_:1},8,["loading"])])])):y("",!0),P.value=="preview"?(n(),p(k,{key:1},[t("div",at,[i(_,{type:"transparent",class:"shrink-0 flex-nowrap",onClick:Te},{default:M(()=>[i(D,{icon:"chevron_left"})]),_:1}),t("div",st,[t("div",it,[t("img",{src:A(fe)(s.value,"large"),class:"max-w-full max-h-[240px] object-contain object-center rounded-lg"},null,8,nt)])]),i(_,{type:"transparent",class:"shrink-0 flex-nowrap",onClick:ke},{default:M(()=>[i(D,{icon:"chevron_right"})]),_:1})]),t("div",ot,[t("div",{class:"font-semibold",innerHTML:s.value.title.rendered},null,8,rt),t("div",ut,[t("div",dt,x(A($e)(s.value.date)),1),(o=s.value.media_details)!=null&&o.width?(n(),p("div",ct,"|")):y("",!0),(g=s.value.media_details)!=null&&g.width?(n(),p("div",pt,x((m=s.value.media_details)==null?void 0:m.width)+" x "+x((f=s.value.media_details)==null?void 0:f.height),1)):y("",!0),e[21]||(e[21]=t("div",{class:"text-sm text-zinc-500"},"|",-1)),t("div",vt,"ID: "+x(s.value.id),1)])])],64)):y("",!0)],2)):y("",!0)],2),t("div",gt,[t("div",xt,[ee.value?(n(),Z(_,{key:0,type:"danger",onClick:L(Ve,["stop"]),loading:V.value},{default:M(()=>[C(x(l.__("Delete selected","uixpress")),1)]),_:1},8,["loading"])):y("",!0),ee.value?(n(),Z(_,{key:1,type:"default",onClick:L(Ae,["stop"]),loading:q.value},{default:M(()=>[C(x(l.__("Duplicate selected","uixpress")),1)]),_:1},8,["loading"])):y("",!0),ee.value?(n(),Z(_,{key:2,type:"transparent",onClick:L(de,["stop"])},{default:M(()=>[C(x(l.__("Clear selection","uixpress")),1)]),_:1})):y("",!0)]),i(Fe,{ref_key:"confirm",ref:F},null,512),i(_,{type:"default",onClick:K},{default:M(()=>[C(x(l.__("Cancel","uixpress")),1)]),_:1}),i(_,{type:"primary",onClick:Oe},{default:M(()=>[C(x(l.__("Done","uixpress")),1)]),_:1})])],512)])):y("",!0)]}),_:1}))}};export{bt as _,Nt as a};
//# sourceMappingURL=index-CGDa9owb.js.map
