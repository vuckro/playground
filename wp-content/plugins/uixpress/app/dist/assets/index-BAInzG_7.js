import{c as k,d as n,b as r,g as u,n as w,t as v,E as K,z as O,A as T,r as c,j,e as g,h as o,B as H,m as L,a as Q,w as h,i as p,C as X,_ as y,G as Y,Q as q,H as J,F as z,f as S,l as B}from"./index-BwRceJDo.js";import{_ as W}from"./index-bl3BAxE_.js";import{_ as I}from"./index-BPHchUXj.js";import{a as Z}from"./index-De0QlMdc.js";const ee={class:"relative flex h-2 w-2"},se={class:"font-mono"},_e={__name:"index",props:["status","text"],setup(x){const l=x,e=k(()=>l.status==="success"?" text-green-600 border-green-300 dark:text-green-700 dark:border-green-700/80":l.status==="warning"?" text-orange-600 border-orange-300 dark:text-orange-700 dark:border-orange-700/80":l.status==="danger"?" text-red-500 border-red-30 dark:text-red-700 dark:border-red-700/80":"text-zinc-500 border-zinc-300 dark:text-zinc-400 dark:border-zinc-700"),d=k(()=>l.status==="success"?"bg-green-300 dark:bg-green-700/80":l.status==="warning"?"bg-orange-300 dark:bg-orange-700/80":l.status==="danger"?"bg-red-300 dark:bg-red-700/80":"bg-zinc-300 dark:bg-zinc-700"),_=k(()=>l.status==="success"?"bg-green-500 dark:bg-green-700/80":l.status==="warning"?"bg-orange-500  dark:bg-orange-700/80":l.status==="danger"?"bg-red-500  dark:bg-red-700/80":"bg-zinc-500  dark:bg-zinc-700");return(b,i)=>(r(),n("div",{class:w(["flex gap-2 flex-row relative items-center rounded-md text-xs py-1 px-2 inline-flex border transition-all",e.value])},[u("span",ee,[u("span",{class:w(["animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",d.value]),style:{"animation-duration":"1.5s"}},null,2),u("span",{class:w(["relative inline-flex rounded-full h-2 w-3",_.value])},null,2)]),u("div",se,v(x.text),1)],2))}},te={key:0,class:"grow"},ae={key:1,class:"text-zinc-500 grow"},re={class:"flex flex-col gap-3 w-[260px]"},ne={class:"relative flex"},le=["placeholder"],oe={class:"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1"},ue={key:0,class:"flex flex-col max-h-80 overflow-auto"},ie=["onClick"],ce={key:1,class:"flex flex-col max-h-80 overflow-auto"},de=["onClick"],fe={key:2,class:"flex flex-row place-content-end items-center gap-1"},me={__name:"index",props:K(["options","placeholder"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(x){const l=O(),e=T(x,"modelValue"),d=c(""),_=c(null),b=c(null),i=c({per_page:10,page:1,pages:0,total:0}),C=c([]),$=c([]),P={users:{value:"users",label:(0,window.wp.i18n.__)("Users","uixpress")},roles:{value:"roles",label:(0,window.wp.i18n.__)("Roles","uixpress")}},f=c("roles"),U=async t=>{b.value.show(t,R()),await m(),M(),Array.isArray(e.value)||(e.value=[])},m=async()=>{const t={endpoint:"wp/v2/users",params:{...i.value,search:d.value}},s=await B(t);s&&(C.value=s.data,i.value.pages=s.totalPages,i.value.total=s.totalItems)},M=async()=>{const s=await B({endpoint:"uixpress/v1/user-roles",params:{}});s&&($.value=s.data)},R=t=>{const a=_.value.getBoundingClientRect();return{clientY:a.bottom+10,clientX:a.left}},A=t=>Array.isArray(e.value)?e.value.find(s=>s.id==t.id):(e.value=[],!1),E=t=>{if(A(t)){const s=e.value.findIndex(a=>a.id==t.id);e.value.splice(s,1)}else e.value.push({id:t.id,value:t.slug,type:"user"})},V=t=>Array.isArray(e.value)?e.value.find(s=>s.value==t.value):(e.value=[],!1),F=t=>{if(V(t)){const s=e.value.findIndex(a=>a.value==t.value);e.value.splice(s,1)}else e.value.push({id:"",value:t.value,type:"role"})},N=()=>{i.value.page--,m()},D=()=>{i.value.page++,m()};return j(()=>{Array.isArray(e.value)||(e.value=[])}),(t,s)=>(r(),n(z,null,[e.value?(r(),n("div",H({key:0,onClick:U},L(l),{ref_key:"parent",ref:_,class:"px-2 py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm col-span-2 flex flex-row gap-3 items-center"}),[e.value.length?(r(),n("span",te,v(`${e.value.length} ${t.__("Items selected","uixpress")}`),1)):(r(),n("span",ae,v(t.__("Select users or roles","uixpress")),1)),e.value.length?(r(),Q(y,{key:2,type:"transparent",onClick:s[0]||(s[0]=X(a=>e.value=[],["stop","prevent"]))},{default:h(()=>[o(p,{icon:"close"})]),_:1})):g("",!0),o(p,{icon:"unfold"})],16)):g("",!0),o(W,{ref_key:"contextmenu",ref:b},{default:h(()=>[u("div",re,[o(Z,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),options:P},null,8,["modelValue"]),u("div",ne,[Y(u("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>d.value=a),class:"px-2 py-2 pl-8 border border-zinc-200 dark:border-zinc-700 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm dark:bg-transparent",placeholder:t.__("Search"),onKeyup:q(m,["enter"])},null,40,le),[[J,d.value]]),u("div",oe,[o(p,{icon:"search",class:"text-lg text-zinc-400"})])]),f.value==="users"?(r(),n("div",ue,[(r(!0),n(z,null,S(C.value,a=>(r(),n("div",{class:"flex flex-row items-center gap-3 p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors rounded-lg cursor-pointer",onClick:G=>E(a)},[o(I,{checked:!!A(a)},null,8,["checked"]),u("div",null,v(a.slug),1)],8,ie))),256))])):g("",!0),f.value==="roles"?(r(),n("div",ce,[(r(!0),n(z,null,S($.value,a=>(r(),n("div",{class:"flex flex-row items-center gap-3 p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors rounded-lg cursor-pointer",onClick:G=>F(a)},[o(I,{checked:!!V(a)},null,8,["checked"]),u("div",null,v(a.value),1)],8,de))),256))])):g("",!0),f.value=="users"?(r(),n("div",fe,[o(y,{type:"default",disabled:i.value.page==1,onClick:N},{default:h(()=>[o(p,{icon:"chevron_left"})]),_:1},8,["disabled"]),o(y,{type:"default",disabled:i.value.page>=i.value.pages,onClick:D},{default:h(()=>[o(p,{icon:"chevron_right"})]),_:1},8,["disabled"])])):g("",!0)])]),_:1},512)],64))}};export{_e as _,me as a};
//# sourceMappingURL=index-BAInzG_7.js.map
