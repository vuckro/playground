{"version":3,"file":"returnIconOverrides-ClaXUxKe.js","sources":["../../src/components/app/menu/src/constants.js","../../src/components/app/menu/src/extractNumberFromHtml.js","../../src/components/app/menu/src/processSubmenu.js","../../src/components/app/menu/src/getBeforeContent.js","../../src/components/app/menu/src/getDashiconClass.js","../../src/components/app/menu/src/processMenu.js","../../src/components/app/menu/src/returnIconOverrides.js"],"sourcesContent":["import { ref } from \"vue\";\n\nexport const loading = ref(false);\nexport const menu = ref([]);\nexport const dashIconsList = ref([]);\nexport const OGmenu = ref([]);\n","/**\n * Extracts a number from a given html string\n *\n * @param {node} html\n *\n * @return {number|null} number on success, null on failure\n * @since 3.2.13\n */\nexport const extractNumberFromHtml = (node) => {\n  if (!node || typeof DOMParser === \"undefined\") {\n    return null;\n  }\n\n  const nodes = node.getElementsByTagName(\"*\"); // get all elements\n\n  for (let node of nodes) {\n    const nodeValue = node.textContent.trim();\n    if (!isNaN(nodeValue)) {\n      return parseInt(nodeValue, 10);\n    }\n  }\n\n  return null;\n};\n","import { extractNumberFromHtml } from \"./extractNumberFromHtml.js\";\n\n/**\n * Processes the submenu items of a given link node.\n * @param {HTMLElement} linknode - The parent link node containing submenu items.\n * @returns {Array|undefined} An array of submenu items or undefined if no submenu items are found.\n */\nexport const processSubmenu = (linknode) => {\n  const submenuitems = linknode.querySelectorAll(\":scope .wp-submenu > li\");\n\n  // No submenu items so bail\n  if (!submenuitems) return;\n\n  let submenu = [];\n\n  for (let li of submenuitems) {\n    const sublink = li.querySelector(\":scope > a\");\n\n    // No sub link\n    if (!sublink) continue;\n\n    const url = sublink.getAttribute(\"href\");\n    const target = sublink.getAttribute(\"target\");\n\n    let active = false;\n    if (sublink.classList.contains(\"current\") || li.classList.contains(\"current\")) {\n      active = true;\n    }\n\n    // Handle naming\n    let name = sublink.innerHTML;\n    const nameParts = name.split(\"<\");\n    const strippedName = nameParts[0] !== \"\" ? nameParts[0] : name;\n\n    // Extract notifications\n    const notifications = extractNumberFromHtml(sublink);\n    const parentid = linknode.getAttribute(\"id\");\n    const id = `${parentid}-${url}`;\n    const sub_id = sublink.getAttribute(\"id\");\n    const og_node = sublink;\n\n    submenu.push({ name: strippedName, url, target, active, id, notifications, sub_id, og_node });\n  }\n\n  return submenu;\n};\n","/**\n * Retrieves the content and font-family of an element's :before pseudo-element.\n * @param {HTMLElement} tempElement - The element to check for :before pseudo-element styles.\n * @returns {Object} An object containing the content and font-family of the :before pseudo-element.\n */\nexport const getBeforeContent = (tempElement) => {\n  // Get the computed styles\n  const styles = window.getComputedStyle(tempElement, \":before\");\n\n  // Get the content\n  let content = styles.getPropertyValue(\"content\");\n  const font = styles.getPropertyValue(\"font-family\");\n  let backGroundImage = styles.getPropertyValue(\"background-image\");\n  backGroundImage = backGroundImage != \"none\" ? backGroundImage : false;\n\n  if (content == \"none\") content = \"\";\n\n  // Return the content (removing quotes if present)\n  return { content: content.replace(/^[\"']|[\"']$/g, \"\"), font, backGroundImage };\n};\n","/**\n * Retrieves the Dashicon class from an element's class list.\n * @param {HTMLElement} element - The element to check for Dashicon classes.\n * @returns {string|null} The Dashicon class if found, null otherwise.\n */\nexport const getDashiconClass = (element) => {\n  // Get the list of classes\n  const classes = element.classList;\n\n  // Check for dashicons-* class\n  for (let className of classes) {\n    if (className.startsWith(\"dashicons-\") && className !== \"dashicons-before\") {\n      return className;\n    }\n  }\n\n  // Return null if no matching class is found\n  return null;\n};\n","import { loading, menu, dashIconsList } from \"./constants.js\";\nimport { processSubmenu } from \"./processSubmenu.js\";\nimport { extractNumberFromHtml } from \"./extractNumberFromHtml.js\";\nimport { getBeforeContent } from \"./getBeforeContent.js\";\nimport { getDashiconClass } from \"./getDashiconClass.js\";\n\n/**\n * Parses the admin menu from the DOM and sets the menu state.\n * @async\n * @param {HTMLElement} menuNode - The root node of the admin menu.\n */\nexport const processMenu = async (menuNode) => {\n  if (menuNode) menuNode = menuNode.querySelector(\"#adminmenu\");\n\n  // There is no menu node so bail\n  if (!menuNode) return (loading.value = false);\n\n  const topLevelItems = menuNode.children;\n  const menuHolder = [];\n  dashIconsList.value = [];\n\n  for (let item of topLevelItems) {\n    // Separator\n    if (item.classList.contains(\"wp-menu-separator\")) {\n      const seps = menuHolder.filter((sep) => sep.type == \"separator\");\n      const id = `separator-${seps.length}`;\n      menuHolder.push({ type: \"separator\", id });\n      continue;\n    }\n\n    const linkNode = item.querySelector(\":scope > a\");\n    const nameNode = item.querySelector(\":scope .wp-menu-name\");\n    const image = item.querySelector(\":scope .wp-menu-image\");\n    const image_as_icon = image ? image.querySelector(\":scope img\") : false;\n\n    // Probably a separator\n    if (!linkNode) continue;\n\n    const id = item.getAttribute(\"id\");\n    const url = linkNode.getAttribute(\"href\");\n    const target = linkNode.getAttribute(\"target\");\n    const notifications = extractNumberFromHtml(nameNode);\n\n    // Check for current link\n    let active = false;\n    if (linkNode.classList.contains(\"current\") || linkNode.getAttribute(\"aria-current\") == \"page\" || item.classList.contains(\"wp-menu-open\")) {\n      active = true;\n    }\n\n    // Handle naming\n    let name = nameNode.innerHTML;\n    const nameParts = name.split(\"<\");\n    const strippedName = nameParts[0] !== \"\" ? nameParts[0] : name;\n\n    // Get icon classes\n    let classes = image.classList ? [...image.classList] : [];\n    //classes = classes.filter((subclass) => !subclass.includes(\"wp-menu-image\"));\n    let iconStyles = classes.includes(\"svg\") ? image.getAttribute(\"style\") : \"\";\n\n    if (image_as_icon) {\n      let href = image_as_icon.getAttribute(\"src\");\n      iconStyles = href ? `background-image: url(\"${href}\");height:1.2rem;background-size:contain;` : \"\";\n    }\n\n    const { content, font, backGroundImage } = getBeforeContent(image);\n\n    const dashClass = getDashiconClass(image);\n    if (dashClass) dashIconsList.value.push({ class: `.${dashClass}`, before: content, font, backGroundImage });\n\n    if (!dashClass && (backGroundImage || content)) dashIconsList.value.push({ class: `#${id} .wp-menu-image`, before: content, font, backGroundImage });\n\n    const submenu = processSubmenu(item);\n\n    // Push to menu\n    menuHolder.push({ url, target, name: strippedName, notifications, imageClasses: classes, iconStyles, submenu, active, id });\n  }\n\n  return { processedMenu: [...menuHolder], dashIcons: dashIconsList.value };\n};\n","import { computed } from \"vue\";\nimport { useAppStore } from \"@/store/app/app.js\";\nlet appStore;\n/**\n * Generates CSS styles for icon overrides.\n * @param {string} dashicon - The dashicon class (unused in the function body).\n * @param {string} icon - The icon name (unused in the function body).\n * @returns {string} A string of CSS styles for icon overrides.\n */\nexport const returnIconOverrides = computed(() => {\n  if (!appStore) appStore = useAppStore();\n\n  const overrides = [\n    [\"dashboard\", \"dashboard\"],\n    [\"admin-post\", \"keep\"],\n    [\"admin-media\", \"photo_library\"],\n    [\"admin-page\", \"description\"],\n    [\"admin-comments\", \"forum\"],\n    [\"admin-appearance\", \"palette\"],\n    [\"admin-plugins\", \"extension\"],\n    [\"admin-users\", \"group\"],\n    [\"admin-tools\", \"build\"],\n    [\"admin-settings\", \"tune\"],\n    [\"archive\", \"inventory\"],\n    [\"chart-bar\", \"equalizer\"],\n  ];\n\n  const base = appStore.state.pluginBase;\n\n  return overrides\n    .map(\n      ([dashicon, icon]) => `\n  .dashicons-${dashicon}:before {\n\tcontent: '';\n\theight: 1.2rem;\n\twidth: 1.2rem;\n\tmin-height: 1.2rem;\n\tmin-width: 1.2rem;\n\tbackground-color: currentColor;\n\t-webkit-mask: url(${base}assets/icons/${icon}.svg) no-repeat center;\n\t-webkit-mask-size: contain;\n\tmask: url(${base}assets/icons/${icon}.svg) no-repeat center;\n\tmask-size: contain;\n\tfont-size: 1.2rem;\n  }\n`\n    )\n    .join(\"\");\n});\n"],"names":["loading","ref","menu","dashIconsList","OGmenu","extractNumberFromHtml","node","nodes","nodeValue","processSubmenu","linknode","submenuitems","submenu","li","sublink","url","target","active","name","nameParts","strippedName","notifications","id","sub_id","og_node","getBeforeContent","tempElement","styles","content","font","backGroundImage","getDashiconClass","element","classes","className","processMenu","menuNode","topLevelItems","menuHolder","item","sep","linkNode","nameNode","image","image_as_icon","iconStyles","href","dashClass","appStore","returnIconOverrides","computed","useAppStore","overrides","base","dashicon","icon"],"mappings":"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"}