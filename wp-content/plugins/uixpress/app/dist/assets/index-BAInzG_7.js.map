{"version":3,"file":"index-BAInzG_7.js","sources":["../../src/components/utility/status-tag/index.vue","../../src/components/utility/multiselect-roles-and-users/index.vue"],"sourcesContent":["<script setup>\nimport { ref, computed } from \"vue\";\nconst props = defineProps([\"status\", \"text\"]);\n\nconst returnStatusClasses = computed(() => {\n  if (props.status === \"success\") return \" text-green-600 border-green-300 dark:text-green-700 dark:border-green-700/80\";\n  if (props.status === \"warning\") return \" text-orange-600 border-orange-300 dark:text-orange-700 dark:border-orange-700/80\";\n  if (props.status === \"danger\") return \" text-red-500 border-red-30 dark:text-red-700 dark:border-red-700/80\";\n  return \"text-zinc-500 border-zinc-300 dark:text-zinc-400 dark:border-zinc-700\";\n});\nconst returnStatusGlowClasses = computed(() => {\n  if (props.status === \"success\") return \"bg-green-300 dark:bg-green-700/80\";\n  if (props.status === \"warning\") return \"bg-orange-300 dark:bg-orange-700/80\";\n  if (props.status === \"danger\") return \"bg-red-300 dark:bg-red-700/80\";\n  return \"bg-zinc-300 dark:bg-zinc-700\";\n});\nconst returnStatusCircleClasses = computed(() => {\n  if (props.status === \"success\") return \"bg-green-500 dark:bg-green-700/80\";\n  if (props.status === \"warning\") return \"bg-orange-500  dark:bg-orange-700/80\";\n  if (props.status === \"danger\") return \"bg-red-500  dark:bg-red-700/80\";\n  return \"bg-zinc-500  dark:bg-zinc-700\";\n});\n</script>\n\n<template>\n  <div class=\"flex gap-2 flex-row relative items-center rounded-md text-xs py-1 px-2 inline-flex border transition-all\" :class=\"returnStatusClasses\">\n    <span class=\"relative flex h-2 w-2\">\n      <span class=\"animate-ping absolute inline-flex h-full w-full rounded-full opacity-75\" :class=\"returnStatusGlowClasses\" style=\"animation-duration: 1.5s\"></span>\n      <span class=\"relative inline-flex rounded-full h-2 w-3\" :class=\"returnStatusCircleClasses\"></span>\n    </span>\n    <div class=\"font-mono\">{{ text }}</div>\n  </div>\n</template>\n","<script setup>\nimport { ref, onMounted, watchEffect, computed, useAttrs, defineModel, defineProps } from \"vue\";\n\nimport { inSearch } from \"@/assets/js/functions/inSearch.js\";\n\n// Emits and props\nconst attrs = useAttrs();\nimport { lmnFetch } from \"@/assets/js/functions/lmnFetch.js\";\n\n// Import comps\nimport ContextMenu from \"@/components/utility/context-menu/index.vue\";\nimport AppIcon from \"@/components/utility/icons/index.vue\";\nimport AppInput from \"@/components/utility/text-input/index.vue\";\nimport AppCheckBox from \"@/components/utility/checkbox-basic/index.vue\";\nimport AppToggle from \"@/components/utility/toggle/index.vue\";\nimport AppButton from \"@/components/utility/app-button/index.vue\";\n\n// Setup refs\nconst model = defineModel();\nconst search = ref(\"\");\nconst parent = ref(null);\nconst contextmenu = ref(null);\nconst props = defineProps([\"options\", \"placeholder\"]);\nconst userPagination = ref({ per_page: 10, page: 1, pages: 0, total: 0 });\nconst users = ref([]);\nconst roles = ref([]);\nconst toggleOptions = { users: { value: \"users\", label: __(\"Users\", \"uixpress\") }, roles: { value: \"roles\", label: __(\"Roles\", \"uixpress\") } };\nconst tab = ref(\"roles\");\n\nconst showOptions = async (evt) => {\n  contextmenu.value.show(evt, returnThisPos());\n  await getUsers();\n  getRoles();\n\n  if (!Array.isArray(model.value)) {\n    model.value = [];\n  }\n};\n\nconst getUsers = async () => {\n  const args = { endpoint: \"wp/v2/users\", params: { ...userPagination.value, search: search.value } };\n  const response = await lmnFetch(args);\n\n  // Something went wrong\n  if (!response) return;\n\n  users.value = response.data;\n  userPagination.value.pages = response.totalPages;\n  userPagination.value.total = response.totalItems;\n};\n\nconst getRoles = async () => {\n  const args = { endpoint: \"uixpress/v1/user-roles\", params: {} };\n  const response = await lmnFetch(args);\n\n  // Something went wrong\n  if (!response) return;\n\n  roles.value = response.data;\n};\n\n/**\n * Returns postition of current target\n *\n * @since 0.0.1\n */\nconst returnThisPos = (evt) => {\n  const target = parent.value;\n  const rect = target.getBoundingClientRect();\n  return { clientY: rect.bottom + 10, clientX: rect.left };\n};\n\nconst isUserSelected = (item) => {\n  if (!Array.isArray(model.value)) {\n    model.value = [];\n    return false;\n  }\n  return model.value.find((user) => user.id == item.id);\n};\n\nconst toggleUserItem = (item) => {\n  if (isUserSelected(item)) {\n    const index = model.value.findIndex((user) => user.id == item.id);\n    model.value.splice(index, 1);\n  } else {\n    model.value.push({ id: item.id, value: item.slug, type: \"user\" });\n  }\n};\n\nconst isRoleSelected = (item) => {\n  if (!Array.isArray(model.value)) {\n    model.value = [];\n    return false;\n  }\n  return model.value.find((role) => role.value == item.value);\n};\n\nconst toggleRoleItem = (item) => {\n  if (isRoleSelected(item)) {\n    const index = model.value.findIndex((role) => role.value == item.value);\n    model.value.splice(index, 1);\n  } else {\n    model.value.push({ id: \"\", value: item.value, type: \"role\" });\n  }\n};\n\nconst backPage = () => {\n  userPagination.value.page--;\n  getUsers();\n};\nconst nextPage = () => {\n  userPagination.value.page++;\n  getUsers();\n};\n\nwatchEffect(() => {\n  if (!Array.isArray(model.value)) model.value = [];\n});\n</script>\n\n<template>\n  <div\n    v-if=\"model\"\n    @click=\"showOptions\"\n    v-bind=\"attrs\"\n    ref=\"parent\"\n    class=\"px-2 py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm col-span-2 flex flex-row gap-3 items-center\"\n  >\n    <span v-if=\"model.length\" class=\"grow\">{{ `${model.length} ${__(\"Items selected\", \"uixpress\")}` }}</span>\n    <span v-else class=\"text-zinc-500 grow\">{{ __(\"Select users or roles\", \"uixpress\") }}</span>\n    <AppButton type=\"transparent\" v-if=\"model.length\" @click.stop.prevent=\"model = []\"><AppIcon icon=\"close\" /></AppButton>\n    <AppIcon icon=\"unfold\" />\n  </div>\n\n  <ContextMenu ref=\"contextmenu\">\n    <div class=\"flex flex-col gap-3 w-[260px]\">\n      <AppToggle v-model=\"tab\" :options=\"toggleOptions\" />\n\n      <!-- Search -->\n      <div class=\"relative flex\">\n        <input\n          v-model=\"search\"\n          class=\"px-2 py-2 pl-8 border border-zinc-200 dark:border-zinc-700 rounded-lg w-full transition-all outline outline-transparent outline-offset-[-2px] focus:outline-indigo-300 dark:focus:outline-indigo-700 focus:shadow-xs text-sm dark:bg-transparent\"\n          :placeholder=\"__('Search')\"\n          @keyup.enter=\"getUsers\"\n        />\n\n        <!-- Icon-->\n        <div class=\"absolute top-0 left-0 h-full flex flex-col place-content-center px-2 py-1\">\n          <AppIcon icon=\"search\" class=\"text-lg text-zinc-400\" />\n        </div>\n      </div>\n\n      <!-- Loop users -->\n      <div v-if=\"tab === 'users'\" class=\"flex flex-col max-h-80 overflow-auto\">\n        <template v-for=\"option in users\">\n          <div class=\"flex flex-row items-center gap-3 p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors rounded-lg cursor-pointer\" @click=\"toggleUserItem(option)\">\n            <AppCheckBox :checked=\"isUserSelected(option) ? true : false\" />\n            <div>{{ option.slug }}</div>\n          </div>\n        </template>\n      </div>\n\n      <!-- Loop roles -->\n      <div v-if=\"tab === 'roles'\" class=\"flex flex-col max-h-80 overflow-auto\">\n        <template v-for=\"option in roles\">\n          <div class=\"flex flex-row items-center gap-3 p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors rounded-lg cursor-pointer\" @click=\"toggleRoleItem(option)\">\n            <AppCheckBox :checked=\"isRoleSelected(option) ? true : false\" />\n            <div>{{ option.value }}</div>\n          </div>\n        </template>\n      </div>\n\n      <!-- Pagination -->\n      <div class=\"flex flex-row place-content-end items-center gap-1\" v-if=\"tab == 'users'\">\n        <AppButton type=\"default\" :disabled=\"userPagination.page == 1\" @click=\"backPage\"><AppIcon icon=\"chevron_left\" /></AppButton>\n        <AppButton type=\"default\" :disabled=\"userPagination.page >= userPagination.pages\" @click=\"nextPage\"><AppIcon icon=\"chevron_right\" /></AppButton>\n      </div>\n    </div>\n  </ContextMenu>\n</template>\n"],"names":["props","__props","returnStatusClasses","computed","returnStatusGlowClasses","returnStatusCircleClasses","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","attrs","useAttrs","model","_useModel","search","ref","parent","contextmenu","userPagination","users","roles","toggleOptions","tab","showOptions","evt","returnThisPos","getUsers","getRoles","args","response","lmnFetch","rect","isUserSelected","item","user","toggleUserItem","index","isRoleSelected","role","toggleRoleItem","backPage","nextPage","watchEffect","_openBlock","_mergeProps","_unref","__","_createBlock","AppButton","_createVNode","AppIcon","ContextMenu","_hoisted_3","AppToggle","$event","_hoisted_4","_hoisted_6","_hoisted_7","_Fragment","_renderList","option","AppCheckBox","_hoisted_9","_hoisted_11"],"mappings":"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"}