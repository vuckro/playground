{"version":3,"file":"index-B3EPg5XS.js","sources":["../../src/components/utility/confirm/index.vue"],"sourcesContent":["<script setup>\nimport { ref, nextTick, watchEffect } from \"vue\";\nimport Modal from \"@/components/utility/modal/index.vue\";\nimport AppIcon from \"@/components/utility/icons/index.vue\";\nimport uiButton from \"@/components/utility/app-button/index.vue\";\n\nconst popup = ref(null);\n\nconst title = ref(undefined);\nconst confirmBody = ref(undefined);\nconst message = ref(undefined);\nconst okButton = ref(undefined);\nconst cancelButton = ref(\"Cancel\");\nconst icon = ref(\"report\");\nconst resolvePromise = ref(undefined);\nconst rejectPromise = ref(undefined);\n\n/**\n * Shows confirm dialog and sets options\n *\n * @param {Object} opts - the confirm options\n * @since 0.0.1\n */\nconst show = (opts = {}) => {\n  title.value = opts.title;\n  message.value = opts.message;\n  okButton.value = opts.okButton;\n  if (opts.icon) {\n    icon.value = opts.icon;\n  }\n  if (opts.cancelButton) {\n    cancelButton.value = opts.cancelButton;\n  }\n  // Once we set our config, we tell the popup modal to open\n  popup.value.show();\n\n  // Return promise so the caller can get results\n  return new Promise((resolve, reject) => {\n    resolvePromise.value = resolve;\n    rejectPromise.value = reject;\n  });\n};\n\n/**\n * Confirms and closes modal\n *\n * @since 0.0.1\n */\nconst confirm = () => {\n  popup.value.close();\n  resolvePromise.value(true);\n};\n\n/**\n * Cancels and closes modal\n *\n * @since 0.0.1\n */\nconst cancel = () => {\n  popup.value.close();\n  resolvePromise.value(false);\n};\n\nwatchEffect(() => {\n  if (confirmBody.value) {\n    confirmBody.value.focus();\n  }\n});\n\n/**\n * Exposes open and close methods\n */\ndefineExpose({\n  show,\n  cancel,\n});\n</script>\n\n<template>\n  <modal ref=\"popup\">\n    <div ref=\"confirmBody\" @keydown.escape=\"cancel()\" @keydown.enter=\"confirm()\" class=\"flex flex-col focus:outline-0 w-[400px] p-8 gap-6\" tabindex=\"1\" autofocus>\n      <div class=\"flex flex-row items-center place-content-between\">\n        <h2 class=\"text-2xl font-semibold text-zinc-900 dark:text-zinc-100\">{{ title }}</h2>\n        <uiButton type=\"transparent\" @click=\"cancel()\"><AppIcon icon=\"close\" /></uiButton>\n      </div>\n\n      <div class=\"text-zinc-500 dark:text-zinc-400\" v-html=\"message\"></div>\n\n      <div class=\"flex flex-row gap-3 items-center place-content-end mt-2\">\n        <uiButton @click.stop=\"cancel()\" type=\"default\">\n          <div class=\"flex flex-row gap-3 items-center place-content-center\">\n            <span>{{ cancelButton }}</span>\n            <span class=\"text-sm text-zinc-500\">esc</span>\n          </div>\n        </uiButton>\n\n        <uiButton @click.stop=\"confirm()\" type=\"primary\">\n          <div class=\"flex flex-row gap-3 items-center place-content-center\">\n            <span>{{ okButton }}</span>\n            <span class=\"text-sm text-zinc-500\"><AppIcon icon=\"return\" /></span>\n          </div>\n        </uiButton>\n      </div>\n    </div>\n  </modal>\n</template>\n"],"names":["popup","ref","title","confirmBody","message","okButton","cancelButton","icon","resolvePromise","rejectPromise","show","opts","resolve","reject","confirm","cancel","watchEffect","__expose","_createBlock","Modal","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","_createVNode","uiButton","AppIcon","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7"],"mappings":"+jBAMA,MAAMA,EAAQC,EAAI,IAAI,EAEhBC,EAAQD,EAAI,MAAS,EACrBE,EAAcF,EAAI,MAAS,EAC3BG,EAAUH,EAAI,MAAS,EACvBI,EAAWJ,EAAI,MAAS,EACxBK,EAAeL,EAAI,QAAQ,EAC3BM,EAAON,EAAI,QAAQ,EACnBO,EAAiBP,EAAI,MAAS,EAC9BQ,EAAgBR,EAAI,MAAS,EAQ7BS,EAAO,CAACC,EAAO,MACnBT,EAAM,MAAQS,EAAK,MACnBP,EAAQ,MAAQO,EAAK,QACrBN,EAAS,MAAQM,EAAK,SAClBA,EAAK,OACPJ,EAAK,MAAQI,EAAK,MAEhBA,EAAK,eACPL,EAAa,MAAQK,EAAK,cAG5BX,EAAM,MAAM,KAAA,EAGL,IAAI,QAAQ,CAACY,EAASC,IAAW,CACtCL,EAAe,MAAQI,EACvBH,EAAc,MAAQI,CAAA,CACvB,GAQGC,EAAU,IAAM,CACpBd,EAAM,MAAM,MAAA,EACZQ,EAAe,MAAM,EAAI,CAAA,EAQrBO,EAAS,IAAM,CACnBf,EAAM,MAAM,MAAA,EACZQ,EAAe,MAAM,EAAK,CAAA,EAG5B,OAAAQ,EAAY,IAAM,CACZb,EAAY,OACdA,EAAY,MAAM,MAAA,CACpB,CACD,EAKDc,EAAa,CACX,KAAAP,EACA,OAAAK,CAAA,CACD,cAICG,EAyBQC,EAAA,SAzBG,QAAJ,IAAInB,CAAA,aACT,IAuBM,CAvBNoB,EAuBM,MAAA,SAvBG,cAAJ,IAAIjB,EAAe,UAAO,kBAASY,EAAA,EAAM,CAAA,QAAA,CAAA,oBAAoBD,IAAO,CAAA,OAAA,CAAA,EAAA,EAAI,MAAM,oDAAoD,SAAS,IAAI,UAAA,EAAA,GAClJM,EAGM,MAHNC,EAGM,CAFJD,EAAoF,KAApFE,EAAoFC,EAAbrB,EAAA,KAAK,EAAA,CAAA,EAC5EsB,EAAkFC,EAAA,CAAxE,KAAK,cAAe,uBAAOV,EAAA,EAAM,aAAI,IAAwB,CAAxBS,EAAwBE,EAAA,CAAf,KAAK,QAAO,CAAA,WAGtEN,EAAqE,MAAA,CAAhE,MAAM,mCAAmC,UAAQhB,EAAA,KAAA,YAEtDgB,EAcM,MAdNO,EAcM,CAbJH,EAKWC,EAAA,CALA,yBAAYV,EAAA,EAAM,CAAA,MAAA,CAAA,GAAI,KAAK,SAAA,aACpC,IAGM,CAHNK,EAGM,MAHNQ,EAGM,CAFJR,EAA+B,cAAtBd,EAAA,KAAY,EAAA,CAAA,EACrBuB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAT,EAA8C,OAAA,CAAxC,MAAM,uBAAA,EAAwB,MAAG,EAAA,EAAA,WAI3CI,EAKWC,EAAA,CALA,yBAAYX,EAAA,EAAO,CAAA,MAAA,CAAA,GAAI,KAAK,SAAA,aACrC,IAGM,CAHNM,EAGM,MAHNU,EAGM,CAFJV,EAA2B,cAAlBf,EAAA,KAAQ,EAAA,CAAA,EACjBe,EAAoE,OAApEW,EAAoE,CAAhCP,EAAyBE,EAAA,CAAhB,KAAK,SAAQ,CAAA"}